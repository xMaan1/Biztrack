(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1902],{15773:function(e,t,s){Promise.resolve().then(s.bind(s,26643))},66901:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},89227:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]])},33276:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},61094:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},26643:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(57437),n=s(2265),r=s(79820),c=s(12381),l=s(69174),i=s(7204),d=s(91723),o=s(33276),u=s(89227),x=s(66901),p=s(61094),m=s(63639),h=s(39989),j=s(46221),f=s(70525),g=s(83127),y=s(98734),N=s(11888),w=s(99376),_=s(93448);function v(){let{user:e}=(0,y.a)(),t=(0,w.useRouter)(),[s,v]=(0,n.useState)(null),[b,P]=(0,n.useState)(!0);(0,n.useEffect)(()=>{Z()},[]);let Z=async()=>{try{P(!0);let e=new g.Z,t=await e.getProductionDashboard();v(t)}catch(e){console.error("Error fetching production dashboard:",e)}finally{P(!1)}},E=e=>{switch(e){case"planned":default:return(0,a.jsx)(d.Z,{className:"h-4 w-4"});case"in_progress":return(0,a.jsx)(o.Z,{className:"h-4 w-4"});case"on_hold":return(0,a.jsx)(u.Z,{className:"h-4 w-4"});case"completed":return(0,a.jsx)(x.Z,{className:"h-4 w-4"});case"cancelled":return(0,a.jsx)(p.Z,{className:"h-4 w-4"})}},S=e=>{switch(e){case"low":return(0,a.jsx)(d.Z,{className:"h-4 w-4"});case"medium":default:return(0,a.jsx)(m.Z,{className:"h-4 w-4"});case"high":return(0,a.jsx)(m.Z,{className:"h-4 w-4 text-orange-500"});case"urgent":return(0,a.jsx)(m.Z,{className:"h-4 w-4 text-red-500"})}};return b?(0,a.jsx)(N.cl,{children:(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):s?(0,a.jsx)(N.cl,{children:(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Production Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Overview of your manufacturing and production operations"})]}),(0,a.jsxs)(c.z,{onClick:()=>t.push("/production"),className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),"View All Plans"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Plans"}),(0,a.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.stats.total_plans}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All production plans"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Completion Rate"}),(0,a.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[s.stats.completion_rate,"%"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Plans completed successfully"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"In Progress"}),(0,a.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.stats.in_progress_plans}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently active plans"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Planned"}),(0,a.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.stats.planned_plans}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Scheduled for future"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Status Distribution"}),(0,a.jsx)(r.SZ,{children:"Breakdown of production plans by status"})]}),(0,a.jsx)(r.aY,{className:"space-y-4",children:Object.entries(s.stats.status_counts).map(e=>{let[t,n]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[E(t),(0,a.jsx)("span",{className:"capitalize",children:t.replace("_"," ")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.E,{value:n/s.stats.total_plans*100,className:"w-20"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:n})]})]},t)})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Priority Distribution"}),(0,a.jsx)(r.SZ,{children:"Breakdown of production plans by priority"})]}),(0,a.jsx)(r.aY,{className:"space-y-4",children:Object.entries(s.stats.priority_counts).map(e=>{let[t,n]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[S(t),(0,a.jsx)("span",{className:"capitalize",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.E,{value:n/s.stats.total_plans*100,className:"w-20"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:n})]})]},t)})})]})]}),(0,a.jsxs)(r.Zb,{className:"mb-8",children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Recent Production Plans"}),(0,a.jsx)(r.SZ,{children:"Latest production plans created"})]}),(0,a.jsx)(r.aY,{children:0===s.recent_plans.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No recent production plans"}):(0,a.jsx)("div",{className:"space-y-4",children:s.recent_plans.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[E(e.status),(0,a.jsx)(l.C,{variant:"outline",className:(0,_.cn)("text-xs",(0,_.z2)(e.status)),children:e.status.replace("_"," ")}),(0,a.jsx)(l.C,{variant:"outline",className:(0,_.cn)("text-xs",(0,_._$)(e.priority)),children:e.priority})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.plan_number})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Target: ",e.target_quantity," ",e.unit_of_measure]}),(0,a.jsxs)("span",{children:["Progress: ",e.completion_percentage,"%"]}),(0,a.jsxs)("span",{children:["Created: ",(0,_.p6)(e.created_at)]})]}),(0,a.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>t.push("/production/".concat(e.id)),children:"View Details"})]},e.id))})})]}),(0,a.jsxs)(r.Zb,{className:"mb-8",children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Upcoming Deadlines"}),(0,a.jsx)(r.SZ,{children:"Production plans ending in the next 7 days"})]}),(0,a.jsx)(r.aY,{children:0===s.upcoming_deadlines.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No upcoming deadlines"}):(0,a.jsx)("div",{className:"space-y-4",children:s.upcoming_deadlines.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-orange-500"}),(0,a.jsx)(l.C,{variant:"outline",className:"text-xs",children:e.status.replace("_"," ")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Due:"," ",e.planned_end_date?(0,_.p6)(e.planned_end_date):"No deadline"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Progress: ",e.completion_percentage,"%"]}),(0,a.jsx)(i.E,{value:e.completion_percentage,className:"w-20"})]}),(0,a.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>t.push("/production/".concat(e.id)),children:"View Details"})]},e.id))})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Priority Alerts"}),(0,a.jsx)(r.SZ,{children:"High and urgent priority production plans"})]}),(0,a.jsx)(r.aY,{children:0===s.priority_alerts.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No priority alerts"}):(0,a.jsx)("div",{className:"space-y-4",children:s.priority_alerts.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-red-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)(l.C,{variant:"destructive",className:"text-xs",children:e.priority.toUpperCase()}),(0,a.jsx)(l.C,{variant:"outline",className:"text-xs",children:e.status.replace("_"," ")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.plan_number})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Progress: ",e.completion_percentage,"%"]}),(0,a.jsx)(i.E,{value:e.completion_percentage,className:"w-20"})]}),(0,a.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>t.push("/production/".concat(e.id)),children:"View Details"})]},e.id))})})]})]})}):(0,a.jsx)(N.cl,{children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No production data available"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Start by creating your first production plan."})]})})}},11888:function(e,t,s){"use strict";s.d(t,{cl:function(){return a.default}});var a=s(78742);s(28278),s(59399)},7204:function(e,t,s){"use strict";s.d(t,{E:function(){return l}});var a=s(57437),n=s(2265),r=s(60610),c=s(93448);let l=n.forwardRef((e,t)=>{let{className:s,value:n,...l}=e;return(0,a.jsx)(r.fC,{ref:t,className:(0,c.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,a.jsx)(r.z$,{className:"h-full w-full flex-1 bg-gradient-to-r from-blue-500 to-purple-600 transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});l.displayName=r.fC.displayName},83127:function(e,t,s){"use strict";var a=s(89441);class n{async createProductionPlan(e){return await a.Ew.post("".concat(this.baseUrl,"/"),e)}async getProductionPlans(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=new URLSearchParams;e.status&&n.append("status",e.status),e.priority&&n.append("priority",e.priority),e.production_type&&n.append("production_type",e.production_type),e.project_id&&n.append("project_id",e.project_id),e.work_order_id&&n.append("work_order_id",e.work_order_id),e.assigned_to_id&&n.append("assigned_to_id",e.assigned_to_id),e.planned_start_date_from&&n.append("planned_start_date_from",e.planned_start_date_from),e.planned_start_date_to&&n.append("planned_start_date_to",e.planned_start_date_to),e.planned_end_date_from&&n.append("planned_end_date_from",e.planned_end_date_from),e.planned_end_date_to&&n.append("planned_end_date_to",e.planned_end_date_to),e.search&&n.append("search",e.search),n.append("page",t.toString()),n.append("limit",s.toString());let r=await a.Ew.get("".concat(this.baseUrl,"/?").concat(n.toString()));return{production_plans:r,total:r.length,page:t,limit:s,total_pages:Math.ceil(r.length/s)}}async getProductionPlan(e){return await a.Ew.get("".concat(this.baseUrl,"/").concat(e))}async updateProductionPlan(e,t){return await a.Ew.put("".concat(this.baseUrl,"/").concat(e),t)}async deleteProductionPlan(e){await a.Ew.delete("".concat(this.baseUrl,"/").concat(e))}async getProductionSteps(e){let t=await a.Ew.get("".concat(this.baseUrl,"/").concat(e,"/steps"));return{production_steps:t,total:t.length}}async createProductionStep(e,t){return await a.Ew.post("".concat(this.baseUrl,"/").concat(e,"/steps"),t)}async updateProductionStep(e,t){return await a.Ew.put("".concat(this.baseUrl,"/steps/").concat(e),t)}async deleteProductionStep(e){await a.Ew.delete("".concat(this.baseUrl,"/steps/").concat(e))}async getProductionSchedules(e){let t=await a.Ew.get("".concat(this.baseUrl,"/").concat(e,"/schedules"));return{production_schedules:t,total:t.length}}async createProductionSchedule(e,t){return await a.Ew.post("".concat(this.baseUrl,"/").concat(e,"/schedules"),t)}async updateProductionSchedule(e,t){return await a.Ew.put("".concat(this.baseUrl,"/schedules/").concat(e),t)}async deleteProductionSchedule(e){await a.Ew.delete("".concat(this.baseUrl,"/schedules/").concat(e))}async getProductionDashboard(){return await a.Ew.get("".concat(this.baseUrl,"/dashboard"))}async getProductionStats(){return await a.Ew.get("".concat(this.baseUrl,"/stats"))}async getProductionPlansByStatus(e){return await a.Ew.get("".concat(this.baseUrl,"/?status=").concat(e))}async getProductionPlansByPriority(e){return await a.Ew.get("".concat(this.baseUrl,"/?priority=").concat(e))}async getProductionPlansByProject(e){return await a.Ew.get("".concat(this.baseUrl,"/?project_id=").concat(e))}async getProductionPlansByWorkOrder(e){return await a.Ew.get("".concat(this.baseUrl,"/?work_order_id=").concat(e))}async searchProductionPlans(e){return await a.Ew.get("".concat(this.baseUrl,"/?search=").concat(encodeURIComponent(e)))}constructor(){this.baseUrl="/production"}}t.Z=n},60610:function(e,t,s){"use strict";s.d(t,{fC:function(){return N},z$:function(){return w}});var a=s(2265),n=s(73966),r=s(66840),c=s(57437),l="Progress",[i,d]=(0,n.b)(l),[o,u]=i(l),x=a.forwardRef((e,t)=>{var s,a,n,l;let{__scopeProgress:i,value:d=null,max:u,getValueLabel:x=h,...p}=e;(u||0===u)&&!g(u)&&console.error((s="".concat(u),a="Progress","Invalid prop `max` of value `".concat(s,"` supplied to `").concat(a,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let m=g(u)?u:100;null===d||y(d,m)||console.error((n="".concat(d),l="Progress","Invalid prop `value` of value `".concat(n,"` supplied to `").concat(l,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let N=y(d,m)?d:null,w=f(N)?x(N,m):void 0;return(0,c.jsx)(o,{scope:i,value:N,max:m,children:(0,c.jsx)(r.WV.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":f(N)?N:void 0,"aria-valuetext":w,role:"progressbar","data-state":j(N,m),"data-value":null!=N?N:void 0,"data-max":m,...p,ref:t})})});x.displayName=l;var p="ProgressIndicator",m=a.forwardRef((e,t)=>{var s;let{__scopeProgress:a,...n}=e,l=u(p,a);return(0,c.jsx)(r.WV.div,{"data-state":j(l.value,l.max),"data-value":null!==(s=l.value)&&void 0!==s?s:void 0,"data-max":l.max,...n,ref:t})});function h(e,t){return"".concat(Math.round(e/t*100),"%")}function j(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function f(e){return"number"==typeof e}function g(e){return f(e)&&!isNaN(e)&&e>0}function y(e,t){return f(e)&&!isNaN(e)&&e<=t&&e>=0}m.displayName=p;var N=x,w=m}},function(e){e.O(0,[7846,7648,4259,2709,2451,9515,5200,2971,2117,1744],function(){return e(e.s=15773)}),_N_E=e.O()}]);