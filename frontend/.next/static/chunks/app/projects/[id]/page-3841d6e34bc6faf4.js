(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3626],{27142:function(e,s,a){Promise.resolve().then(a.bind(a,19509))},32660:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},46211:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(39763).Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]])},56266:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(39763).Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},19509:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return R}});var t,r,l,c,n=a(57437),i=a(2265),d=a(99376),x=a(27648),m=a(79820),o=a(12381),h=a(69174),j=a(96246),u=a(7204),p=a(32060),N=a(17168),g=a(95937),b=a(30021),f=a(15863),y=a(22252),v=a(32660),w=a(17684),k=a(94630),C=a(18930),Z=a(70525),T=a(97418),E=a(95805),M=a(95252),P=a(48736),S=a(91723),D=a(31047),L=a(46211);(t=l||(l={})).PLANNING="planning",t.IN_PROGRESS="in_progress",t.ON_HOLD="on_hold",t.COMPLETED="completed",t.CANCELLED="cancelled",(r=c||(c={})).LOW="low",r.MEDIUM="medium",r.HIGH="high",r.CRITICAL="critical";var A=a(89441),O=a(98734),_=a(11888),z=a(76070),I=a(47668);function R(){var e,s;let a=(0,d.useParams)(),t=(0,d.useRouter)(),{user:r}=(0,O.a)(),R=a.id,[H,G]=(0,i.useState)(null),[B,F]=(0,i.useState)([]),[V,Q]=(0,i.useState)(!0),[U,Y]=(0,i.useState)(!1),[q,W]=(0,i.useState)(null),[X,$]=(0,i.useState)("overview"),[J,K]=(0,i.useState)(!1),ee=(0,i.useCallback)(async()=>{try{Q(!0),W(null);let e=await A.Ew.getProject(R);G(e)}catch(a){var e,s;console.error("Failed to load project:",a),W((null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"Failed to load project details")}finally{Q(!1)}},[R]),es=(0,i.useCallback)(async()=>{try{Y(!0);let e=await A.Ew.getTasks({project:R,includeSubtasks:!0,mainTasksOnly:!1});F(e.tasks||[])}catch(e){console.error("Failed to load tasks:",e)}finally{Y(!1)}},[R]);(0,i.useEffect)(()=>{ee()},[ee]),(0,i.useEffect)(()=>{"tasks"===X&&es()},[X,es]);let ea=async()=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone."))try{await A.Ew.deleteProject(R),t.push("/projects")}catch(e){console.error("Failed to delete project:",e),W("Failed to delete project")}};if(V)return(0,n.jsx)(_.cl,{children:(0,n.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,n.jsx)("div",{className:"flex justify-center py-8",children:(0,n.jsx)(f.Z,{className:"h-8 w-8 animate-spin text-blue-600"})})})});if(q||!H)return(0,n.jsx)(_.cl,{children:(0,n.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,n.jsxs)(g.bZ,{className:"mb-4 border-red-200 bg-red-50",children:[(0,n.jsx)(y.Z,{className:"h-4 w-4"}),(0,n.jsx)(g.X,{className:"text-red-800",children:q||"Project not found"})]}),(0,n.jsxs)(o.z,{onClick:()=>t.push("/projects"),className:"flex items-center space-x-2",children:[(0,n.jsx)(v.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Back to Projects"})]})]})});let et=(()=>{let e=B.length;return{totalTasks:e,completedTasks:B.filter(e=>"completed"===e.status).length,inProgressTasks:B.filter(e=>"in_progress"===e.status).length,todoTasks:B.filter(e=>"todo"===e.status).length}})();return(0,n.jsx)(_.cl,{children:(0,n.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(b.aG,{children:(0,n.jsxs)(b.Jb,{children:[(0,n.jsx)(b.gN,{children:(0,n.jsx)(b.At,{asChild:!0,children:(0,n.jsx)(x.default,{href:"/projects",children:"Projects"})})}),(0,n.jsx)(b.bg,{}),(0,n.jsx)(b.gN,{children:(0,n.jsx)(b.AG,{children:H.name})})]})})}),(0,n.jsx)(m.Zb,{className:"modern-card mb-8",children:(0,n.jsxs)(m.aY,{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:H.name}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:H.description}),(0,n.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(e=>{switch(e){case l.COMPLETED:return(0,n.jsx)(h.C,{className:"bg-green-100 text-green-800 border-green-200",children:"Completed"});case l.IN_PROGRESS:return(0,n.jsx)(h.C,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"In Progress"});case l.ON_HOLD:return(0,n.jsx)(h.C,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"On Hold"});case l.CANCELLED:return(0,n.jsx)(h.C,{className:"bg-red-100 text-red-800 border-red-200",children:"Cancelled"});default:return(0,n.jsx)(h.C,{variant:"secondary",children:"Unknown"})}})(H.status),(e=>{switch(e){case c.CRITICAL:return(0,n.jsx)(h.C,{className:"bg-red-100 text-red-800 border-red-200",children:"Critical"});case c.HIGH:return(0,n.jsx)(h.C,{className:"bg-orange-100 text-orange-800 border-orange-200",children:"High"});case c.MEDIUM:return(0,n.jsx)(h.C,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Medium"});case c.LOW:return(0,n.jsx)(h.C,{className:"bg-green-100 text-green-800 border-green-200",children:"Low"});default:return(0,n.jsx)(h.C,{variant:"secondary",children:"Unknown"})}})(H.priority)]})]}),((null==r?void 0:r.userRole)==="super_admin"||(null==r?void 0:r.userRole)==="project_manager"&&(null==H?void 0:H.projectManager.id)===r.userId)&&(0,n.jsxs)(p.h_,{children:[(0,n.jsx)(p.$F,{asChild:!0,children:(0,n.jsx)(o.z,{variant:"ghost",size:"sm",children:(0,n.jsx)(w.Z,{className:"h-4 w-4"})})}),(0,n.jsxs)(p.AW,{align:"end",children:[(0,n.jsxs)(p.Xi,{onClick:()=>{K(!0)},children:[(0,n.jsx)(k.Z,{className:"mr-2 h-4 w-4"}),"Edit Project"]}),(0,n.jsx)(p.VD,{}),(0,n.jsxs)(p.Xi,{onClick:ea,className:"text-red-600",children:[(0,n.jsx)(C.Z,{className:"mr-2 h-4 w-4"}),"Delete Project"]})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,n.jsxs)(m.Zb,{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:[(0,n.jsx)(Z.Z,{className:"h-10 w-10 text-blue-600 mx-auto mb-2"}),(0,n.jsxs)("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:[H.completionPercent,"%"]}),(0,n.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Completion"}),(0,n.jsx)(u.E,{value:H.completionPercent,className:"h-2"})]}),(0,n.jsxs)(m.Zb,{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:[(0,n.jsx)(T.Z,{className:"h-10 w-10 text-green-600 mx-auto mb-2"}),(0,n.jsx)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:et.totalTasks}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Total Tasks"}),(0,n.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:[et.completedTasks," completed"]})]}),(0,n.jsxs)(m.Zb,{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200",children:[(0,n.jsx)(E.Z,{className:"h-10 w-10 text-purple-600 mx-auto mb-2"}),(0,n.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:H.teamMembers.length+1}),(0,n.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Team Members"}),(0,n.jsxs)("div",{className:"flex justify-center -space-x-2",children:[(0,n.jsx)(j.qE,{className:"h-6 w-6 border-2 border-white",children:(0,n.jsx)(j.Q5,{className:"text-xs bg-gradient-primary text-white",children:H.projectManager.name.charAt(0)})}),H.teamMembers.slice(0,3).map(e=>(0,n.jsx)(j.qE,{className:"h-6 w-6 border-2 border-white",children:(0,n.jsx)(j.Q5,{className:"text-xs bg-gradient-primary text-white",children:e.name.charAt(0)})},e.id)),H.teamMembers.length>3&&(0,n.jsx)("div",{className:"h-6 w-6 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center",children:(0,n.jsxs)("span",{className:"text-xs text-gray-600",children:["+",H.teamMembers.length-3]})})]})]}),(0,n.jsxs)(m.Zb,{className:"text-center p-4 bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-200",children:[(0,n.jsx)(M.Z,{className:"h-10 w-10 text-yellow-600 mx-auto mb-2"}),(0,n.jsxs)("div",{className:"text-3xl font-bold text-yellow-600 mb-1",children:["$",(null===(e=H.budget)||void 0===e?void 0:e.toLocaleString())||"0"]}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Budget"}),(0,n.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["$",(null===(s=H.actualCost)||void 0===s?void 0:s.toLocaleString())||"0"," spent"]})]})]})]})}),(0,n.jsxs)(N.mQ,{value:X,onValueChange:$,className:"mb-8",children:[(0,n.jsxs)(N.dr,{className:"grid w-full grid-cols-3",children:[(0,n.jsxs)(N.SP,{value:"overview",className:"flex items-center space-x-2",children:[(0,n.jsx)(P.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Overview"})]}),(0,n.jsxs)(N.SP,{value:"tasks",className:"flex items-center space-x-2",children:[(0,n.jsx)(T.Z,{className:"h-4 w-4"}),(0,n.jsxs)("span",{children:["Tasks (",et.totalTasks,")"]})]}),(0,n.jsxs)(N.SP,{value:"timeline",className:"flex items-center space-x-2",children:[(0,n.jsx)(S.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Timeline"})]})]}),(0,n.jsx)(N.nU,{value:"overview",className:"space-y-6",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"lg:col-span-2",children:[(0,n.jsxs)(m.Zb,{className:"modern-card mb-6",children:[(0,n.jsx)(m.Ol,{children:(0,n.jsx)(m.ll,{children:"Project Details"})}),(0,n.jsxs)(m.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(D.Z,{className:"h-5 w-5 text-gray-500"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Start Date"}),(0,n.jsx)("p",{className:"font-medium",children:new Date(H.startDate).toLocaleDateString()})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(S.Z,{className:"h-5 w-5 text-gray-500"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"End Date"}),(0,n.jsx)("p",{className:"font-medium",children:new Date(H.endDate).toLocaleDateString()})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(E.Z,{className:"h-5 w-5 text-gray-500"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Project Manager"}),(0,n.jsx)("p",{className:"font-medium",children:H.projectManager.name})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(L.Z,{className:"h-5 w-5 text-gray-500"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Priority"}),(0,n.jsx)("p",{className:"font-medium capitalize",children:H.priority})]})]})]}),H.notes&&(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Notes"}),(0,n.jsx)("p",{className:"text-gray-600",children:H.notes})]})]})]}),(0,n.jsxs)(m.Zb,{className:"modern-card",children:[(0,n.jsx)(m.Ol,{children:(0,n.jsx)(m.ll,{children:"Quick Actions"})}),(0,n.jsx)(m.aY,{children:(0,n.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,n.jsxs)(o.z,{onClick:()=>t.push("/projects/".concat(R,"/tasks")),className:"modern-button flex items-center space-x-2",children:[(0,n.jsx)(T.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Manage Tasks & Subtasks"})]}),(0,n.jsxs)(o.z,{variant:"outline",onClick:()=>$("tasks"),className:"flex items-center space-x-2",children:[(0,n.jsx)(T.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Quick Task View"})]}),(0,n.jsxs)(o.z,{variant:"outline",onClick:()=>$("timeline"),className:"flex items-center space-x-2",children:[(0,n.jsx)(S.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"View Timeline"})]})]})})]})]}),(0,n.jsx)("div",{children:(0,n.jsxs)(m.Zb,{className:"modern-card",children:[(0,n.jsx)(m.Ol,{children:(0,n.jsx)(m.ll,{children:"Team Members"})}),(0,n.jsx)(m.aY,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(j.qE,{className:"h-10 w-10",children:(0,n.jsx)(j.Q5,{className:"bg-gradient-primary text-white",children:H.projectManager.name.charAt(0)})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:H.projectManager.name}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Project Manager"})]})]}),H.teamMembers.map(e=>(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(j.qE,{className:"h-10 w-10",children:(0,n.jsx)(j.Q5,{className:"bg-gradient-primary text-white",children:e.name.charAt(0)})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:e.name}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:e.role||"Team Member"})]})]},e.id))]})})]})})]})}),(0,n.jsxs)(N.nU,{value:"tasks",className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Project Tasks"}),(0,n.jsxs)(o.z,{onClick:()=>t.push("/projects/".concat(R,"/tasks")),className:"modern-button flex items-center space-x-2",children:[(0,n.jsx)(T.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"View Full Task Manager"})]})]}),U?(0,n.jsx)("div",{className:"flex justify-center py-8",children:(0,n.jsx)(f.Z,{className:"h-8 w-8 animate-spin text-blue-600"})}):0===B.length?(0,n.jsx)(m.Zb,{className:"modern-card",children:(0,n.jsxs)(m.aY,{className:"p-8 text-center",children:[(0,n.jsx)(T.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tasks found"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"Create your first task to get started with this project."}),(0,n.jsxs)(o.z,{onClick:()=>t.push("/projects/".concat(R,"/tasks")),className:"modern-button flex items-center space-x-2",children:[(0,n.jsx)(T.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Create Task"})]})]})}):(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B.slice(0,6).map(e=>(0,n.jsx)(I.sD,{task:e,onEdit:()=>t.push("/projects/".concat(R,"/tasks")),onDelete:()=>t.push("/projects/".concat(R,"/tasks")),onStatusChange:()=>t.push("/projects/".concat(R,"/tasks")),onAddSubtask:()=>t.push("/projects/".concat(R,"/tasks"))},e.id))}),B.length>6&&(0,n.jsx)(m.Zb,{className:"modern-card",children:(0,n.jsxs)(m.aY,{className:"p-4 text-center",children:[(0,n.jsxs)("p",{className:"text-gray-600 mb-3",children:["Showing 6 of ",B.length," tasks"]}),(0,n.jsx)(o.z,{variant:"outline",onClick:()=>t.push("/projects/".concat(R,"/tasks")),children:"View All Tasks"})]})})]})]}),(0,n.jsx)(N.nU,{value:"timeline",children:(0,n.jsx)(m.Zb,{className:"modern-card",children:(0,n.jsxs)(m.aY,{className:"p-8 text-center",children:[(0,n.jsx)(S.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Timeline View"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Timeline functionality coming soon..."})]})})})]}),H&&(0,n.jsx)(z.g,{open:J,onClose:()=>K(!1),onSave:e=>{G(e),K(!1)},project:H,mode:"edit"})]})})}},30021:function(e,s,a){"use strict";a.d(s,{AG:function(){return o},At:function(){return m},Jb:function(){return d},aG:function(){return i},bg:function(){return h},gN:function(){return x}});var t=a(57437),r=a(2265),l=a(37053),c=a(10407),n=(a(56266),a(93448));let i=r.forwardRef((e,s)=>{let{...a}=e;return(0,t.jsx)("nav",{ref:s,"aria-label":"breadcrumb",...a})});i.displayName="Breadcrumb";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("ol",{ref:s,className:(0,n.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",a),...r})});d.displayName="BreadcrumbList";let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("li",{ref:s,className:(0,n.cn)("inline-flex items-center gap-1.5",a),...r})});x.displayName="BreadcrumbItem";let m=r.forwardRef((e,s)=>{let{asChild:a,className:r,...c}=e,i=a?l.g7:"a";return(0,t.jsx)(i,{ref:s,className:(0,n.cn)("transition-colors hover:text-foreground",r),...c})});m.displayName="BreadcrumbLink";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("span",{ref:s,role:"link","aria-disabled":"true","aria-current":"page",className:(0,n.cn)("font-normal text-foreground",a),...r})});o.displayName="BreadcrumbPage";let h=e=>{let{children:s,className:a,...r}=e;return(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,n.cn)("[&>svg]:size-3.5",a),...r,children:null!=s?s:(0,t.jsx)(c.Z,{})})};h.displayName="BreadcrumbSeparator"}},function(e){e.O(0,[7846,7648,4259,2709,2451,4975,4284,9153,9515,5200,3218,9844,2971,2117,1744],function(){return e(e.s=27142)}),_N_E=e.O()}]);