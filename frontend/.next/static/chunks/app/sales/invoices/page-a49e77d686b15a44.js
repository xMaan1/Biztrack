(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6823],{47205:function(e,t,s){Promise.resolve().then(s.bind(s,27373))},73618:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},65302:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},92735:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},42208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},90740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},89345:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},17684:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},94630:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},27373:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Q}});var a=s(57437),r=s(2265),n=s(79820),i=s(12381),l=s(40279),c=s(75060),d=s(15291),o=s(17168),u=s(74291),m=s(99397),x=s(90740),h=s(63639),j=s(65302),p=s(94630),f=s(11888),g=s(89441);class v{async createInvoice(e){return(await g.Ew.post("".concat(this.baseUrl,"/"),e)).invoice}async getInvoices(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=new URLSearchParams;return a.append("page",t.toString()),a.append("limit",s.toString()),Object.entries(e).forEach(e=>{let[t,s]=e;null!=s&&a.append(t,s.toString())}),await g.Ew.get("".concat(this.baseUrl,"/?").concat(a))}async getInvoice(e){return(await g.Ew.get("".concat(this.baseUrl,"/").concat(e))).invoice}async updateInvoice(e,t){return(await g.Ew.put("".concat(this.baseUrl,"/").concat(e),t)).invoice}async deleteInvoice(e){await g.Ew.delete("".concat(this.baseUrl,"/").concat(e))}async sendInvoice(e){await g.Ew.post("".concat(this.baseUrl,"/").concat(e,"/send"))}async markInvoiceAsPaid(e){await g.Ew.post("".concat(this.baseUrl,"/").concat(e,"/mark-as-paid"))}async getDashboard(){return await g.Ew.get("".concat(this.baseUrl,"/dashboard/overview"))}async createPayment(e,t){return(await g.Ew.post("".concat(this.baseUrl,"/").concat(e,"/payments"),t)).payment}async getInvoicePayments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=new URLSearchParams({page:t.toString(),limit:s.toString()});return await g.Ew.get("".concat(this.baseUrl,"/").concat(e,"/payments?").concat(a))}async getAllPayments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=new URLSearchParams;return a.append("page",t.toString()),a.append("limit",s.toString()),Object.entries(e).forEach(e=>{let[t,s]=e;null!=s&&a.append(t,s.toString())}),await g.Ew.get("".concat(this.baseUrl,"/payments/?").concat(a))}calculateInvoiceTotals(e,t,s){let a=e.reduce((e,t)=>e+t.quantity*t.unitPrice,0),r=s/100*a,n=a-r,i=t/100*n;return{subtotal:Math.round(100*a)/100,discount:Math.round(100*r)/100,taxAmount:Math.round(100*i)/100,total:Math.round(100*(n+i))/100}}getStatusColor(e){return({draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",viewed:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",partially_paid:"bg-orange-100 text-orange-800",overdue:"bg-red-100 text-red-800",cancelled:"bg-red-100 text-red-800",void:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800"}getStatusLabel(e){return({draft:"Draft",sent:"Sent",viewed:"Viewed",paid:"Paid",partially_paid:"Partially Paid",overdue:"Overdue",cancelled:"Cancelled",void:"Void"})[e]||e}getPaymentMethodLabel(e){return({credit_card:"Credit Card",bank_transfer:"Bank Transfer",cash:"Cash",check:"Check",paypal:"PayPal",stripe:"Stripe",other:"Other"})[e]||e}formatCurrency(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}isOverdue(e){return new Date(e)<new Date}getDaysOverdue(e){let t=new Date(e);return Math.max(0,Math.ceil((new Date().getTime()-t.getTime())/864e5))}constructor(){this.baseUrl="/invoices"}}var y=new v,N=s(23675),b=s(48736),w=s(92369),C=s(60044),D=s(73618),I=s(18930);function k(e){let{open:t,onOpenChange:s,onSubmit:o,mode:x,invoice:h}=e,[j,p]=(0,r.useState)({customerId:"",customerName:"",customerEmail:"",customerPhone:"",billingAddress:"",shippingAddress:"",issueDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],orderNumber:"",orderTime:new Date().toISOString().slice(0,16),paymentTerms:"Net 30",currency:"USD",taxRate:0,discount:0,notes:"",terms:"",items:[],opportunityId:"",quoteId:"",projectId:""}),[f,g]=(0,r.useState)([]),[v,k]=(0,r.useState)(!1),[S,Z]=(0,r.useState)({});(0,r.useEffect)(()=>{h&&"edit"===x?(p({customerId:h.customerId,customerName:h.customerName,customerEmail:h.customerEmail,customerPhone:h.customerPhone||"",billingAddress:h.billingAddress,shippingAddress:h.shippingAddress||"",issueDate:h.issueDate,dueDate:h.dueDate,orderNumber:h.orderNumber||"",orderTime:h.orderTime||new Date().toISOString().slice(0,16),paymentTerms:h.paymentTerms,currency:h.currency,taxRate:h.taxRate,discount:h.discount,notes:h.notes||"",terms:h.terms||"",items:[],opportunityId:h.opportunityId||"",quoteId:h.quoteId||"",projectId:h.projectId||""}),g(h.items.map(e=>({description:e.description,quantity:e.quantity,unitPrice:e.unitPrice,discount:e.discount,taxRate:e.taxRate,productId:e.productId,projectId:e.projectId,taskId:e.taskId})))):(p({customerId:"",customerName:"",customerEmail:"",customerPhone:"",billingAddress:"",shippingAddress:"",issueDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],orderNumber:"",orderTime:new Date().toISOString().slice(0,16),paymentTerms:"Net 30",currency:"USD",taxRate:0,discount:0,notes:"",terms:"",items:[],opportunityId:"",quoteId:"",projectId:""}),g([])),Z({})},[h,x,t]);let _=(e,t)=>{p(s=>({...s,[e]:t})),S[e]&&Z(t=>({...t,[e]:""}))},P=(e,t,s)=>{let a=[...f];a[e]={...a[e],[t]:s},g(a)},A=e=>{g(t=>t.filter((t,s)=>s!==e))},R=()=>{let e=f.reduce((e,t)=>e+t.quantity*t.unitPrice,0),t=j.discount/100*e,s=e-t,a=j.taxRate/100*s;return{subtotal:Math.round(100*e)/100,discount:Math.round(100*t)/100,taxAmount:Math.round(100*a)/100,total:Math.round(100*(s+a))/100}},E=()=>{let e={};return j.customerName.trim()||(e.customerName="Customer name is required"),j.customerEmail.trim()||(e.customerEmail="Customer email is required"),j.billingAddress.trim()||(e.billingAddress="Billing address is required"),j.issueDate||(e.issueDate="Issue date is required"),j.dueDate||(e.dueDate="Due date is required"),0===f.length&&(e.items="At least one item is required"),f.forEach((t,s)=>{t.description.trim()||(e["item_".concat(s,"_description")]="Item description is required"),t.quantity<=0&&(e["item_".concat(s,"_quantity")]="Quantity must be greater than 0"),t.unitPrice<0&&(e["item_".concat(s,"_unitPrice")]="Unit price cannot be negative")}),Z(e),0===Object.keys(e).length},T=async e=>{if(e.preventDefault(),E()){k(!0);try{R();let e={...j,items:f};await o(e),s(!1)}catch(e){console.error("Error submitting invoice:",e)}finally{k(!1)}}},F=R();return(0,a.jsx)(u.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(u.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(u.fK,{children:(0,a.jsxs)(u.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5"}),"create"===x?"Create New Invoice":"Edit Invoice"]})}),(0,a.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"Customer Information"]})}),(0,a.jsxs)(n.aY,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"customerName",children:"Customer Name *"}),(0,a.jsx)(l.I,{id:"customerName",value:j.customerName,onChange:e=>_("customerName",e.target.value),placeholder:"Enter customer name",className:S.customerName?"border-red-500":""}),S.customerName&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.customerName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"customerEmail",children:"Customer Email *"}),(0,a.jsx)(l.I,{id:"customerEmail",type:"email",value:j.customerEmail,onChange:e=>_("customerEmail",e.target.value),placeholder:"Enter customer email",className:S.customerEmail?"border-red-500":""}),S.customerEmail&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.customerEmail})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"customerPhone",children:"Customer Phone (Optional)"}),(0,a.jsx)(l.I,{id:"customerPhone",type:"tel",value:j.customerPhone,onChange:e=>_("customerPhone",e.target.value),placeholder:"Enter customer phone number"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)(c._,{htmlFor:"billingAddress",children:"Billing Address *"}),(0,a.jsx)(N.g,{id:"billingAddress",value:j.billingAddress,onChange:e=>_("billingAddress",e.target.value),placeholder:"Enter billing address",className:S.billingAddress?"border-red-500":""}),S.billingAddress&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.billingAddress})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)(c._,{htmlFor:"shippingAddress",children:"Shipping Address (Optional)"}),(0,a.jsx)(N.g,{id:"shippingAddress",value:j.shippingAddress,onChange:e=>_("shippingAddress",e.target.value),placeholder:"Enter shipping address (leave blank if same as billing)"})]})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"h-4 w-4"}),"Invoice Details"]})}),(0,a.jsxs)(n.aY,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"issueDate",children:"Issue Date *"}),(0,a.jsx)(l.I,{id:"issueDate",type:"date",value:j.issueDate,onChange:e=>_("issueDate",e.target.value),className:S.issueDate?"border-red-500":""}),S.issueDate&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.issueDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"dueDate",children:"Due Date *"}),(0,a.jsx)(l.I,{id:"dueDate",type:"date",value:j.dueDate,onChange:e=>_("dueDate",e.target.value),className:S.dueDate?"border-red-500":""}),S.dueDate&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.dueDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"orderNumber",children:"Order Number (Optional)"}),(0,a.jsx)(l.I,{id:"orderNumber",value:j.orderNumber,onChange:e=>_("orderNumber",e.target.value),placeholder:"Enter order number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"orderTime",children:"Order Time (Optional)"}),(0,a.jsx)(l.I,{id:"orderTime",type:"datetime-local",value:j.orderTime,onChange:e=>_("orderTime",e.target.value),placeholder:"Select order time"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"paymentTerms",children:"Payment Terms"}),(0,a.jsxs)(d.Ph,{value:j.paymentTerms,onValueChange:e=>_("paymentTerms",e),children:[(0,a.jsx)(d.i4,{children:(0,a.jsx)(d.ki,{})}),(0,a.jsxs)(d.Bw,{children:[(0,a.jsx)(d.Ql,{value:"Net 15",children:"Net 15"}),(0,a.jsx)(d.Ql,{value:"Net 30",children:"Net 30"}),(0,a.jsx)(d.Ql,{value:"Net 45",children:"Net 45"}),(0,a.jsx)(d.Ql,{value:"Net 60",children:"Net 60"}),(0,a.jsx)(d.Ql,{value:"Due on Receipt",children:"Due on Receipt"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"currency",children:"Currency"}),(0,a.jsxs)(d.Ph,{value:j.currency,onValueChange:e=>_("currency",e),children:[(0,a.jsx)(d.i4,{children:(0,a.jsx)(d.ki,{})}),(0,a.jsxs)(d.Bw,{children:[(0,a.jsx)(d.Ql,{value:"USD",children:"USD ($)"}),(0,a.jsx)(d.Ql,{value:"EUR",children:"EUR (€)"}),(0,a.jsx)(d.Ql,{value:"GBP",children:"GBP (\xa3)"}),(0,a.jsx)(d.Ql,{value:"CAD",children:"CAD (C$)"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"taxRate",children:"Tax Rate (%)"}),(0,a.jsx)(l.I,{id:"taxRate",type:"number",step:"0.01",min:"0",max:"100",value:j.taxRate,onChange:e=>_("taxRate",parseFloat(e.target.value)||0),placeholder:"0.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"discount",children:"Discount (%)"}),(0,a.jsx)(l.I,{id:"discount",type:"number",step:"0.01",min:"0",max:"100",value:j.discount,onChange:e=>_("discount",parseFloat(e.target.value)||0),placeholder:"0.00"})]})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(D.Z,{className:"h-4 w-4"}),"Invoice Items"]}),S.items&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:S.items})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[f.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-end border p-3 rounded-lg",children:[(0,a.jsxs)("div",{className:"col-span-4",children:[(0,a.jsx)(c._,{htmlFor:"item_".concat(t,"_description"),children:"Description *"}),(0,a.jsx)(l.I,{id:"item_".concat(t,"_description"),value:e.description,onChange:e=>P(t,"description",e.target.value),placeholder:"Item description",className:S["item_".concat(t,"_description")]?"border-red-500":""}),S["item_".concat(t,"_description")]&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S["item_".concat(t,"_description")]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(c._,{htmlFor:"item_".concat(t,"_quantity"),children:"Qty *"}),(0,a.jsx)(l.I,{id:"item_".concat(t,"_quantity"),type:"number",min:"0.01",step:"0.01",value:e.quantity,onChange:e=>P(t,"quantity",parseFloat(e.target.value)||0),className:S["item_".concat(t,"_quantity")]?"border-red-500":""}),S["item_".concat(t,"_quantity")]&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S["item_".concat(t,"_quantity")]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(c._,{htmlFor:"item_".concat(t,"_unitPrice"),children:"Unit Price *"}),(0,a.jsx)(l.I,{id:"item_".concat(t,"_unitPrice"),type:"number",min:"0",step:"0.01",value:e.unitPrice,onChange:e=>P(t,"unitPrice",parseFloat(e.target.value)||0),placeholder:"0.00",className:S["item_".concat(t,"_unitPrice")]?"border-red-500":""}),S["item_".concat(t,"_unitPrice")]&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S["item_".concat(t,"_unitPrice")]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(c._,{htmlFor:"item_".concat(t,"_discount"),children:"Discount (%)"}),(0,a.jsx)(l.I,{id:"item_".concat(t,"_discount"),type:"number",min:"0",max:"100",step:"0.01",value:e.discount,onChange:e=>P(t,"discount",parseFloat(e.target.value)||0),placeholder:"0.00"})]}),(0,a.jsxs)("div",{className:"col-span-1",children:[(0,a.jsx)(c._,{children:"Total"}),(0,a.jsx)("div",{className:"text-sm font-medium p-2 bg-gray-50 rounded",children:y.formatCurrency(e.quantity*e.unitPrice*(1-e.discount/100))})]}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>A(t),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(I.Z,{className:"h-4 w-4"})})})]},t)),(0,a.jsxs)(i.z,{type:"button",variant:"outline",onClick:()=>{let e={description:"",quantity:1,unitPrice:0,discount:0,taxRate:0};g(t=>[...t,e])},className:"w-full",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]}),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-6",children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("div",{className:"w-64 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Subtotal:"}),(0,a.jsx)("span",{children:y.formatCurrency(F.subtotal)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{children:["Discount (",j.discount,"%):"]}),(0,a.jsxs)("span",{children:["-",y.formatCurrency(F.discount)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{children:["Tax (",j.taxRate,"%):"]}),(0,a.jsx)("span",{children:y.formatCurrency(F.taxAmount)})]}),(0,a.jsx)("div",{className:"border-t pt-2 font-bold text-lg",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsx)("span",{children:y.formatCurrency(F.total)})]})})]})})})}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Additional Information"})}),(0,a.jsxs)(n.aY,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"notes",children:"Notes (Optional)"}),(0,a.jsx)(N.g,{id:"notes",value:j.notes,onChange:e=>_("notes",e.target.value),placeholder:"Add any additional notes for the customer",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"terms",children:"Terms & Conditions (Optional)"}),(0,a.jsx)(N.g,{id:"terms",value:j.terms,onChange:e=>_("terms",e.target.value),placeholder:"Add terms and conditions",rows:3})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(i.z,{type:"submit",disabled:v,className:"modern-button",children:v?"Saving...":"create"===x?"Create Invoice":"Update Invoice"})]})]})]})})}var S=s(33804),Z=s(69174),_=s(32060),P=s(31047),A=s(95252),R=s(17684),E=s(42208),T=s(89345),F=s(92735),O=s(60621),M=s(14438);function z(e){let{invoices:t,loading:s,onEdit:n,onDelete:l,onSend:c,onMarkAsPaid:d,currentPage:o,totalPages:u,onPageChange:m}=e,[x,h]=(0,r.useState)(null),f=async e=>{try{h(e);let t=new O.S().getToken();if(!t){M.Am.error("Authentication required");return}let s=await fetch("http://localhost:8000/invoices/".concat(e,"/download"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(s.ok){let t=await s.blob(),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="invoice-".concat(e,".pdf"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r),M.Am.success("Invoice downloaded successfully!")}else M.Am.error("Failed to download invoice")}catch(e){console.error("Download error:",e),M.Am.error("Error downloading invoice")}finally{h(null)}};return s?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading invoices..."})}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(b.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("p",{children:"No invoices found. Create your first invoice to get started."})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)(S.iA,{children:[(0,a.jsx)(S.xD,{children:(0,a.jsxs)(S.SC,{children:[(0,a.jsx)(S.ss,{children:"Invoice #"}),(0,a.jsx)(S.ss,{children:"Order #"}),(0,a.jsx)(S.ss,{children:"Customer"}),(0,a.jsx)(S.ss,{children:"Issue Date"}),(0,a.jsx)(S.ss,{children:"Due Date"}),(0,a.jsx)(S.ss,{children:"Amount"}),(0,a.jsx)(S.ss,{children:"Status"}),(0,a.jsx)(S.ss,{children:"Balance"}),(0,a.jsx)(S.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(S.RM,{children:t.map(e=>(0,a.jsxs)(S.SC,{children:[(0,a.jsx)(S.pj,{className:"font-medium",children:e.invoiceNumber}),(0,a.jsx)(S.pj,{children:e.orderNumber||"-"}),(0,a.jsx)(S.pj,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.customerName}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.customerEmail}),e.customerPhone&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.customerPhone})]})}),(0,a.jsx)(S.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-gray-500"}),y.formatDate(e.issueDate)]})}),(0,a.jsx)(S.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:y.isOverdue(e.dueDate)?"text-red-600 font-medium":"",children:y.formatDate(e.dueDate)})]})}),(0,a.jsx)(S.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium",children:y.formatCurrency(e.total,e.currency)})]})}),(0,a.jsx)(S.pj,{children:(0,a.jsx)(Z.C,{className:y.getStatusColor(e.status),children:y.getStatusLabel(e.status)})}),(0,a.jsx)(S.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:e.balance>0?"text-red-600 font-medium":"text-green-600 font-medium",children:y.formatCurrency(e.balance,e.currency)})]})}),(0,a.jsx)(S.pj,{className:"text-right",children:(0,a.jsxs)(_.h_,{children:[(0,a.jsx)(_.$F,{asChild:!0,children:(0,a.jsx)(i.z,{variant:"ghost",size:"sm",children:(0,a.jsx)(R.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(_.AW,{align:"end",children:[(0,a.jsxs)(_.Xi,{onClick:()=>n(e),children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 mr-2"}),"View Details"]}),(0,a.jsxs)(_.Xi,{onClick:()=>n(e),children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Edit Invoice"]}),(0,a.jsx)(_.VD,{}),"draft"===e.status&&(0,a.jsxs)(_.Xi,{onClick:()=>c(e.id),children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 mr-2"}),"Send Invoice"]}),"sent"===e.status&&(0,a.jsxs)(_.Xi,{onClick:()=>d(e.id),children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Mark as Paid"]}),(0,a.jsx)(_.Xi,{onClick:()=>f(e.id),disabled:x===e.id,children:x===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-blue-600"}),"Generating PDF..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.Z,{className:"mr-2 h-4 w-4 mr-2"}),"Download PDF"]})}),(0,a.jsx)(_.VD,{}),"draft"===e.status&&(0,a.jsxs)(_.Xi,{onClick:()=>l(e),className:"text-red-600",children:[(0,a.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Delete Invoice"]})]})]})})]},e.id))})]})}),u>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",o," of ",u]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>m(o-1),disabled:1===o,children:"Previous"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>m(o+1),disabled:o===u,children:"Next"})]})]})]})}var V=s(91723),q=s(70525),U=s(95805),Y=s(46221);function L(e){let{dashboard:t}=e,{metrics:s,recentInvoices:r,overdueInvoices:i,topCustomers:l,monthlyRevenue:c}=t;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,a.jsx)(b.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.totalInvoices}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Invoices"})]})]})})}),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,a.jsx)(j.Z,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.paidInvoices}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Paid Invoices"})]})]})})}),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,a.jsx)(h.Z,{className:"h-6 w-6 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.overdueInvoices}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Overdue Invoices"})]})]})})}),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-gray-100 rounded-lg",children:(0,a.jsx)(V.Z,{className:"h-6 w-6 text-gray-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.draftInvoices}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Draft Invoices"})]})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(q.Z,{className:"h-5 w-5 text-green-600"}),"Total Revenue"]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:y.formatCurrency(s.totalRevenue)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["From ",s.paidInvoices," paid invoices"]})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5 text-orange-600"}),"Outstanding Amount"]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:y.formatCurrency(s.outstandingAmount)}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Awaiting payment"})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-red-600"}),"Overdue Amount"]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-red-600",children:y.formatCurrency(s.overdueAmount)}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Past due date"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5"}),"Recent Invoices"]}),(0,a.jsx)(n.SZ,{children:"Latest invoices created in the system"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.invoiceNumber}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.customerName})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:y.formatCurrency(e.total,e.currency)}),(0,a.jsx)(Z.C,{className:y.getStatusColor(e.status),children:y.getStatusLabel(e.status)})]})]},e.id))})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(U.Z,{className:"h-5 w-5"}),"Top Customers"]}),(0,a.jsx)(n.SZ,{children:"Customers with highest invoice values"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-blue-600",children:e.name.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.count," invoices"]})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("p",{className:"font-medium text-gray-900",children:y.formatCurrency(e.amount)})})]},t))})})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(Y.Z,{className:"h-5 w-5"}),"Monthly Revenue Trend"]}),(0,a.jsx)(n.SZ,{children:"Revenue performance over the last 6 months"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"h-64 flex items-end justify-between gap-2",children:c.map((e,t)=>(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-full bg-blue-100 rounded-t-sm",style:{height:"".concat(Math.max(e.revenue/Math.max(...c.map(e=>e.revenue))*200,20),"px")}}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-2 text-center",children:e.month}),(0,a.jsx)("p",{className:"text-xs font-medium text-gray-900 mt-1",children:y.formatCurrency(e.revenue)})]},e.month))})})]}),i.length>0&&(0,a.jsxs)(n.Zb,{className:"border-red-200 bg-red-50",children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),"Overdue Invoices Require Attention"]}),(0,a.jsxs)(n.SZ,{children:[i.length," invoice(s) are past their due date"]})]}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[i.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-red-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900",children:[e.invoiceNumber," - ",e.customerName]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Due: ",y.formatDate(e.dueDate)," •",y.getDaysOverdue(e.dueDate)," days overdue"]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("p",{className:"font-medium text-red-600",children:y.formatCurrency(e.total,e.currency)})})]},e.id)),i.length>3&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["And ",i.length-3," more overdue invoices..."]})]})})]})]})}function Q(){let[e,t]=(0,r.useState)(null),[s,g]=(0,r.useState)([]),[v,N]=(0,r.useState)(!0),[b,w]=(0,r.useState)(null),[C,D]=(0,r.useState)("dashboard"),[I,S]=(0,r.useState)(!1),[Z,_]=(0,r.useState)(!1),[P,A]=(0,r.useState)(!1),[R,E]=(0,r.useState)(null),[T,F]=(0,r.useState)({}),[O,M]=(0,r.useState)(""),[V,q]=(0,r.useState)("all"),[U,Y]=(0,r.useState)(1),[Q,B]=(0,r.useState)(1);(0,r.useEffect)(()=>{$()},[C,U]);let $=(0,r.useCallback)(async()=>{try{if(N(!0),w(null),"dashboard"===C){let e=await y.getDashboard();t(e)}else{let e=await y.getInvoices({...T,search:O,status:"all"!==V?V:void 0},U,10);g(e.invoices),B(e.pagination.pages)}}catch(e){w(e instanceof Error?e.message:"Failed to load data")}finally{N(!1)}},[C,T,O,V,U]),K=async e=>{try{await y.createInvoice(e),S(!1),$()}catch(e){w(e instanceof Error?e.message:"Failed to create invoice")}},G=async(e,t)=>{try{await y.updateInvoice(e,t),_(!1),E(null),$()}catch(e){w(e instanceof Error?e.message:"Failed to update invoice")}},H=async e=>{try{await y.deleteInvoice(e),A(!1),E(null),$()}catch(e){w(e instanceof Error?e.message:"Failed to delete invoice")}},W=async e=>{try{await y.sendInvoice(e),$()}catch(e){w(e instanceof Error?e.message:"Failed to send invoice")}},X=async e=>{try{await y.markInvoiceAsPaid(e),$()}catch(e){w(e instanceof Error?e.message:"Failed to mark invoice as paid")}},J=e=>{E(e),_(!0)},ee=e=>{F({...T,...e}),Y(1)},et=()=>{Y(1),$()};return v&&"dashboard"===C?(0,a.jsx)(f.cl,{children:(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading Invoice Dashboard..."})})})}):b&&"dashboard"===C?(0,a.jsx)(f.cl,{children:(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-red-600 mb-4",children:["Error: ",b]}),(0,a.jsx)(i.z,{onClick:$,children:"Retry"})]})})}):(0,a.jsx)(f.cl,{children:(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Invoices"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your invoices, track payments, and monitor revenue"})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsxs)(i.z,{onClick:()=>S(!0),className:"modern-button",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Create Invoice"]})})]}),(0,a.jsxs)(o.mQ,{value:C,onValueChange:D,children:[(0,a.jsxs)(o.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(o.SP,{value:"dashboard",children:"Dashboard"}),(0,a.jsx)(o.SP,{value:"invoices",children:"All Invoices"}),(0,a.jsx)(o.SP,{value:"overdue",children:"Overdue"})]}),(0,a.jsx)(o.nU,{value:"dashboard",className:"space-y-6",children:e&&(0,a.jsx)(L,{dashboard:e})}),(0,a.jsxs)(o.nU,{value:"invoices",className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),"Filters"]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"search",children:"Search"}),(0,a.jsx)(l.I,{id:"search",placeholder:"Search invoices...",value:O,onChange:e=>M(e.target.value),onKeyPress:e=>"Enter"===e.key&&et()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(d.Ph,{value:V,onValueChange:q,children:[(0,a.jsx)(d.i4,{children:(0,a.jsx)(d.ki,{placeholder:"All Statuses"})}),(0,a.jsxs)(d.Bw,{children:[(0,a.jsx)(d.Ql,{value:"all",children:"All Statuses"}),(0,a.jsx)(d.Ql,{value:"draft",children:"Draft"}),(0,a.jsx)(d.Ql,{value:"sent",children:"Sent"}),(0,a.jsx)(d.Ql,{value:"viewed",children:"Viewed"}),(0,a.jsx)(d.Ql,{value:"paid",children:"Paid"}),(0,a.jsx)(d.Ql,{value:"overdue",children:"Overdue"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"dateFrom",children:"From Date"}),(0,a.jsx)(l.I,{id:"dateFrom",type:"date",value:T.dateFrom||"",onChange:e=>ee({dateFrom:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"dateTo",children:"To Date"}),(0,a.jsx)(l.I,{id:"dateTo",type:"date",value:T.dateTo||"",onChange:e=>ee({dateTo:e.target.value})})]})]}),(0,a.jsx)("div",{className:"flex justify-end mt-4",children:(0,a.jsx)(i.z,{onClick:et,children:"Apply Filters"})})]})]}),(0,a.jsx)(z,{invoices:s,loading:v,onEdit:J,onDelete:e=>{E(e),A(!0)},onSend:W,onMarkAsPaid:X,currentPage:U,totalPages:Q,onPageChange:Y})]}),(0,a.jsx)(o.nU,{value:"overdue",className:"space-y-6",children:(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),"Overdue Invoices"]}),(0,a.jsx)(n.SZ,{children:"Invoices that are past their due date and require immediate attention"})]}),(0,a.jsx)(n.aY,{children:(null==e?void 0:e.overdueInvoices)&&e.overdueInvoices.length>0?(0,a.jsx)("div",{className:"space-y-4",children:e.overdueInvoices.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900",children:[e.invoiceNumber," - ",e.customerName]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Due: ",y.formatDate(e.dueDate)," • Amount:"," ",y.formatCurrency(e.total)]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(i.z,{size:"sm",onClick:()=>X(e.id),className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-1"}),"Mark Paid"]}),(0,a.jsxs)(i.z,{size:"sm",variant:"outline",onClick:()=>J(e),children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-1"}),"Edit"]})]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(j.Z,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),(0,a.jsx)("p",{children:"No overdue invoices! All invoices are up to date."})]})})]})})]}),(0,a.jsx)(k,{open:I,onOpenChange:S,onSubmit:K,mode:"create"}),(0,a.jsx)(k,{open:Z,onOpenChange:_,onSubmit:e=>R&&G(R.id,e),mode:"edit",invoice:R}),(0,a.jsx)(u.Vq,{open:P,onOpenChange:A,children:(0,a.jsxs)(u.cZ,{children:[(0,a.jsx)(u.fK,{children:(0,a.jsx)(u.$N,{children:"Delete Invoice"})}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsxs)("p",{children:["Are you sure you want to delete invoice"," ",(0,a.jsx)("strong",{children:null==R?void 0:R.invoiceNumber}),"? This action cannot be undone."]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,a.jsx)(i.z,{variant:"destructive",onClick:()=>R&&H(R.id),children:"Delete"})]})]})})]})})}},11888:function(e,t,s){"use strict";s.d(t,{cl:function(){return a.default}});var a=s(78742);s(28278),s(59399)},74291:function(e,t,s){"use strict";s.d(t,{$N:function(){return j},Be:function(){return p},Vq:function(){return c},cN:function(){return h},cZ:function(){return m},fK:function(){return x},hg:function(){return d}});var a=s(57437),r=s(2265),n=s(49027),i=s(32489),l=s(93448);let c=n.fC,d=n.xz,o=n.h_;n.x8;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});u.displayName=n.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:s,children:r,...c}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...c,children:[r,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};x.displayName="DialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="DialogFooter";let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});j.displayName=n.Dx.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});p.displayName=n.dk.displayName},40279:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var a=s(57437),r=s(2265),n=s(93448);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},75060:function(e,t,s){"use strict";s.d(t,{_:function(){return d}});var a=s(57437),r=s(2265),n=s(6394),i=s(90535),l=s(93448);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,l.cn)(c(),s),...r})});d.displayName=n.f.displayName},15291:function(e,t,s){"use strict";s.d(t,{Bw:function(){return j},Ph:function(){return o},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var a=s(57437),r=s(2265),n=s(33911),i=s(40875),l=s(22135),c=s(30401),d=s(93448);let o=n.fC;n.ZA;let u=n.B4,m=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=n.u_.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=n.$G.displayName;let j=r.forwardRef((e,t)=>{let{className:s,children:r,position:i="popper",...l}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,a.jsx)(x,{}),(0,a.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});j.displayName=n.VY.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=n.__.displayName;let p=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:r})]})});p.displayName=n.ck.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=n.Z0.displayName},33804:function(e,t,s){"use strict";s.d(t,{RM:function(){return c},SC:function(){return d},iA:function(){return i},pj:function(){return u},ss:function(){return o},xD:function(){return l}});var a=s(57437),r=s(2265),n=s(93448);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",s),...r})})});i.displayName="Table";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",s),...r})});l.displayName="TableHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...r})});c.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});d.displayName="TableRow";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});o.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption"},17168:function(e,t,s){"use strict";s.d(t,{SP:function(){return d},dr:function(){return c},mQ:function(){return l},nU:function(){return o}});var a=s(57437),r=s(2265),n=s(20271),i=s(93448);let l=n.fC,c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});c.displayName=n.aV.displayName;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});d.displayName=n.xz.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});o.displayName=n.VY.displayName},23675:function(e,t,s){"use strict";s.d(t,{g:function(){return i}});var a=s(57437),r=s(2265),n=s(93448);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});i.displayName="Textarea"},6394:function(e,t,s){"use strict";s.d(t,{f:function(){return l}});var a=s(2265),r=s(66840),n=s(57437),i=a.forwardRef((e,t)=>(0,n.jsx)(r.WV.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i},20271:function(e,t,s){"use strict";s.d(t,{VY:function(){return P},aV:function(){return Z},fC:function(){return S},xz:function(){return _}});var a=s(2265),r=s(6741),n=s(73966),i=s(1353),l=s(71599),c=s(66840),d=s(29114),o=s(80886),u=s(99255),m=s(57437),x="Tabs",[h,j]=(0,n.b)(x,[i.Pc]),p=(0,i.Pc)(),[f,g]=h(x),v=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:r,defaultValue:n,orientation:i="horizontal",dir:l,activationMode:h="automatic",...j}=e,p=(0,d.gm)(l),[g,v]=(0,o.T)({prop:a,onChange:r,defaultProp:null!=n?n:"",caller:x});return(0,m.jsx)(f,{scope:s,baseId:(0,u.M)(),value:g,onValueChange:v,orientation:i,dir:p,activationMode:h,children:(0,m.jsx)(c.WV.div,{dir:p,"data-orientation":i,...j,ref:t})})});v.displayName=x;var y="TabsList",N=a.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...r}=e,n=g(y,s),l=p(s);return(0,m.jsx)(i.fC,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:a,children:(0,m.jsx)(c.WV.div,{role:"tablist","aria-orientation":n.orientation,...r,ref:t})})});N.displayName=y;var b="TabsTrigger",w=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:n=!1,...l}=e,d=g(b,s),o=p(s),u=I(d.baseId,a),x=k(d.baseId,a),h=a===d.value;return(0,m.jsx)(i.ck,{asChild:!0,...o,focusable:!n,active:h,children:(0,m.jsx)(c.WV.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...l,ref:t,onMouseDown:(0,r.M)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(a)}),onKeyDown:(0,r.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(a)}),onFocus:(0,r.M)(e.onFocus,()=>{let e="manual"!==d.activationMode;h||n||!e||d.onValueChange(a)})})})});w.displayName=b;var C="TabsContent",D=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:r,forceMount:n,children:i,...d}=e,o=g(C,s),u=I(o.baseId,r),x=k(o.baseId,r),h=r===o.value,j=a.useRef(h);return a.useEffect(()=>{let e=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(l.z,{present:n||h,children:s=>{let{present:a}=s;return(0,m.jsx)(c.WV.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:x,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:j.current?"0s":void 0},children:a&&i})}})});function I(e,t){return"".concat(e,"-trigger-").concat(t)}function k(e,t){return"".concat(e,"-content-").concat(t)}D.displayName=C;var S=v,Z=N,_=w,P=D}},function(e){e.O(0,[7846,7648,4259,2709,2451,4975,5202,9515,5200,2971,2117,1744],function(){return e(e.s=47205)}),_N_E=e.O()}]);