(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5664],{11653:function(e,s,t){Promise.resolve().then(t.bind(t,33194))},16275:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(39763).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},33194:function(e,s,t){"use strict";t.r(s);var a=t(57437),n=t(2265),r=t(79820),l=t(12381),i=t(69174),c=t(17168),o=t(95252),d=t(16275),u=t(70525),x=t(63639),m=t(99397),h=t(44794),f=t(71621),j=t(98734),p=t(89441),v=t(11888),N=t(99376);s.default=()=>{let{user:e}=(0,j.a)(),s=(0,N.useRouter)(),[t,g]=(0,n.useState)(null),[y,b]=(0,n.useState)(null),[w,S]=(0,n.useState)([]),[k,C]=(0,n.useState)([]),[Z,O]=(0,n.useState)(!0),[V,T]=(0,n.useState)(!1);(0,n.useEffect)(()=>{E(),P()},[]);let E=async()=>{try{let e=await p.Ew.get("/pos/dashboard");g(e.metrics),S(e.recentTransactions||[]),C(e.lowStockProducts||[])}catch(e){console.error("Error fetching POS dashboard data:",e)}finally{O(!1)}},P=async()=>{try{let e=await p.Ew.get("/pos/shifts/current/open");e.shift&&b(e.shift)}catch(e){console.error("Error checking open shift:",e)}},D=async()=>{T(!0);try{let e=await p.Ew.post("/pos/shifts",{openingBalance:0,notes:"Shift opened"});b(e.shift)}catch(e){console.error("Error opening shift:",e)}finally{T(!1)}},R=async()=>{if(y){T(!0);try{await p.Ew.put("/pos/shifts/".concat(y.id),{status:"closed",closingBalance:y.openingBalance+y.totalSales}),b(null),E()}catch(e){console.error("Error closing shift:",e)}finally{T(!1)}}},z=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),A=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return Z?(0,a.jsx)(v.cl,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):(0,a.jsx)(v.cl,{children:(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"POS Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your point of sale operations and monitor sales performance"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:y?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Shift Open"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:y.shiftNumber}),(0,a.jsx)(l.z,{variant:"outline",onClick:R,disabled:V,children:V?"Closing...":"Close Shift"})]}):(0,a.jsx)(l.z,{onClick:D,disabled:V,className:"bg-green-600 hover:bg-green-700",children:V?"Opening...":"Open Shift"})})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Sales"}),(0,a.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:z((null==t?void 0:t.totalSales)||0)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time sales"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Transactions"}),(0,a.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==t?void 0:t.totalTransactions)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total transactions"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Avg Transaction"}),(0,a.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:z((null==t?void 0:t.averageTransactionValue)||0)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Average per transaction"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Low Stock Items"}),(0,a.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:k.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Items below threshold"})]})]})]}),(0,a.jsxs)(c.mQ,{defaultValue:"overview",className:"space-y-4",children:[(0,a.jsxs)(c.dr,{children:[(0,a.jsx)(c.SP,{value:"overview",children:"Overview"}),(0,a.jsx)(c.SP,{value:"transactions",children:"Recent Transactions"}),(0,a.jsx)(c.SP,{value:"inventory",children:"Low Stock Alert"})]}),(0,a.jsx)(c.nU,{value:"overview",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Daily Sales (Last 7 Days)"}),(0,a.jsx)(r.SZ,{children:"Sales performance over the past week"})]}),(0,a.jsx)(r.aY,{children:(null==t?void 0:t.dailySales)&&t.dailySales.length>0?(0,a.jsx)("div",{className:"space-y-2",children:t.dailySales.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.date}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:z(e.sales)})]},s))}):(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No sales data available"})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Quick Actions"}),(0,a.jsx)(r.SZ,{children:"Common POS operations"})]}),(0,a.jsxs)(r.aY,{className:"space-y-3",children:[(0,a.jsxs)(l.z,{className:"w-full justify-start",variant:"outline",onClick:()=>{s.push("/pos/sale")},children:[(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"New Sale"]}),(0,a.jsxs)(l.z,{className:"w-full justify-start",variant:"outline",onClick:()=>{s.push("/pos/products")},children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Add Product"]}),(0,a.jsxs)(l.z,{className:"w-full justify-start",variant:"outline",onClick:()=>{s.push("/pos/reports")},children:[(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"View Reports"]})]})]})]})}),(0,a.jsx)(c.nU,{value:"transactions",className:"space-y-4",children:(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Recent Transactions"}),(0,a.jsx)(r.SZ,{children:"Latest sales transactions"})]}),(0,a.jsx)(r.aY,{children:w.length>0?(0,a.jsx)("div",{className:"space-y-3",children:w.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.transactionNumber}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.customerName||"Walk-in Customer"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium",children:z(e.total)}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.C,{variant:"outline",children:e.paymentMethod}),(0,a.jsx)(i.C,{variant:"completed"===e.status?"default":"secondary",children:e.status})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:A(e.createdAt)})]})]},e.id))}):(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No transactions found"})})]})}),(0,a.jsx)(c.nU,{value:"inventory",className:"space-y-4",children:(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Low Stock Alert"}),(0,a.jsx)(r.SZ,{children:"Products that need restocking"})]}),(0,a.jsx)(r.aY,{children:k.length>0?(0,a.jsx)("div",{className:"space-y-3",children:k.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["SKU: ",e.sku]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium",children:z(e.price)}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(i.C,{variant:"destructive",children:["Stock: ",e.stockQuantity]}),(0,a.jsxs)(i.C,{variant:"outline",children:["Min: ",e.lowStockThreshold]})]})]})]},e.id))}):(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"All products are well stocked"})})]})})]})]})})}},11888:function(e,s,t){"use strict";t.d(s,{cl:function(){return a.default}});var a=t(78742);t(28278),t(59399)},17168:function(e,s,t){"use strict";t.d(s,{SP:function(){return o},dr:function(){return c},mQ:function(){return i},nU:function(){return d}});var a=t(57437),n=t(2265),r=t(20271),l=t(93448);let i=r.fC,c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.aV,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n})});c.displayName=r.aV.displayName;let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.xz,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n})});o.displayName=r.xz.displayName;let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.VY,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})});d.displayName=r.VY.displayName},20271:function(e,s,t){"use strict";t.d(s,{VY:function(){return E},aV:function(){return V},fC:function(){return O},xz:function(){return T}});var a=t(2265),n=t(6741),r=t(73966),l=t(1353),i=t(71599),c=t(66840),o=t(29114),d=t(80886),u=t(99255),x=t(57437),m="Tabs",[h,f]=(0,r.b)(m,[l.Pc]),j=(0,l.Pc)(),[p,v]=h(m),N=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,onValueChange:n,defaultValue:r,orientation:l="horizontal",dir:i,activationMode:h="automatic",...f}=e,j=(0,o.gm)(i),[v,N]=(0,d.T)({prop:a,onChange:n,defaultProp:null!=r?r:"",caller:m});return(0,x.jsx)(p,{scope:t,baseId:(0,u.M)(),value:v,onValueChange:N,orientation:l,dir:j,activationMode:h,children:(0,x.jsx)(c.WV.div,{dir:j,"data-orientation":l,...f,ref:s})})});N.displayName=m;var g="TabsList",y=a.forwardRef((e,s)=>{let{__scopeTabs:t,loop:a=!0,...n}=e,r=v(g,t),i=j(t);return(0,x.jsx)(l.fC,{asChild:!0,...i,orientation:r.orientation,dir:r.dir,loop:a,children:(0,x.jsx)(c.WV.div,{role:"tablist","aria-orientation":r.orientation,...n,ref:s})})});y.displayName=g;var b="TabsTrigger",w=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,disabled:r=!1,...i}=e,o=v(b,t),d=j(t),u=C(o.baseId,a),m=Z(o.baseId,a),h=a===o.value;return(0,x.jsx)(l.ck,{asChild:!0,...d,focusable:!r,active:h,children:(0,x.jsx)(c.WV.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":m,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u,...i,ref:s,onMouseDown:(0,n.M)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(a)}),onKeyDown:(0,n.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(a)}),onFocus:(0,n.M)(e.onFocus,()=>{let e="manual"!==o.activationMode;h||r||!e||o.onValueChange(a)})})})});w.displayName=b;var S="TabsContent",k=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:n,forceMount:r,children:l,...o}=e,d=v(S,t),u=C(d.baseId,n),m=Z(d.baseId,n),h=n===d.value,f=a.useRef(h);return a.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,x.jsx)(i.z,{present:r||h,children:t=>{let{present:a}=t;return(0,x.jsx)(c.WV.div,{"data-state":h?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:m,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:f.current?"0s":void 0},children:a&&l})}})});function C(e,s){return"".concat(e,"-trigger-").concat(s)}function Z(e,s){return"".concat(e,"-content-").concat(s)}k.displayName=S;var O=N,V=y,T=w,E=k}},function(e){e.O(0,[7846,7648,4259,2709,2451,9515,5200,2971,2117,1744],function(){return e(e.s=11653)}),_N_E=e.O()}]);