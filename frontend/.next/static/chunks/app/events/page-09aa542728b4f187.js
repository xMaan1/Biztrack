(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{66142:function(e,t,s){Promise.resolve().then(s.bind(s,38606)),Promise.resolve().then(s.bind(s,78742)),Promise.resolve().then(s.bind(s,28278)),Promise.resolve().then(s.bind(s,59399))},38606:function(e,t,s){"use strict";s.d(t,{default:function(){return S}});var n=s(57437),a=s(2265),l=s(12381),i=s(40279),r=s(15291),c=s(79820),d=s(99397),o=s(73247),h=s(41473),u=s(7586),x=s(31047),m=s(69174),p=s(91723),v=s(83774),j=s(95805),g=s(29374);function y(e){let{event:t,onEdit:s,onDelete:a,onJoin:i,onLeave:r}=e,d=new Date(t.startDate),o=new Date(t.endDate),h=d>new Date,u=t.isOnline&&t.googleMeetLink,y=e=>e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return(0,n.jsxs)(c.Zb,{className:"hover:shadow-lg transition-shadow duration-200",children:[(0,n.jsx)(c.Ol,{className:"pb-3",children:(0,n.jsx)("div",{className:"flex items-start justify-between",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(c.ll,{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:t.title}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,n.jsx)(m.C,{className:(e=>{switch(e){case"meeting":return"bg-purple-100 text-purple-800";case"workshop":return"bg-orange-100 text-orange-800";case"deadline":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(t.eventType),children:t.eventType.replace("_"," ")}),(0,n.jsx)(m.C,{className:(e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(t.status),children:t.status.replace("_"," ")})]})]})})}),(0,n.jsxs)(c.aY,{className:"space-y-3",children:[t.description&&(0,n.jsx)("p",{className:"text-gray-600 text-sm line-clamp-2",children:t.description}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4"}),(0,n.jsxs)("span",{children:[y(d)," - ",y(o)]})]}),t.location&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,n.jsx)(v.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:t.location})]}),t.participants.length>0&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4"}),(0,n.jsxs)("span",{children:[t.participants.length," participants"]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[u&&(0,n.jsxs)(l.z,{size:"sm",variant:"outline",className:"flex items-center gap-2",onClick:()=>window.open(t.googleMeetLink,"_blank"),children:[(0,n.jsx)(g.Z,{className:"h-4 w-4"}),"Join Meeting"]}),h&&"scheduled"===t.status&&(0,n.jsx)(n.Fragment,{children:i&&(0,n.jsx)(l.z,{size:"sm",variant:"default",onClick:()=>i(t.id),children:"Join Event"})}),s&&(0,n.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>s(t),children:"Edit"}),a&&(0,n.jsx)(l.z,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>a(t.id),children:"Delete"})]})]})]})}var f=s(23675),N=s(75060),b=s(94589),w=s(72457),C=s(66928),T=s(36171);function k(e){let{event:t,onSubmit:s,onCancel:c,loading:d=!1}=e,[o,h]=(0,a.useState)([]),[u,x]=(0,a.useState)(!1),[m,p]=(0,a.useState)({title:"",description:"",eventType:"meeting",startDate:"",startTime:"",endDate:"",endTime:"",location:"",isOnline:!0,participants:"",discussionPoints:"",reminderMinutes:15,projectId:"",recurrenceType:"none"}),v=(0,w.b)(),{customEventTypes:j,createCustomEventType:g,loading:y}=(0,C.x)();(0,a.useEffect)(()=>{(async()=>{try{let e=await v.getProjects();e&&e.projects&&h(e.projects)}catch(e){console.error("Failed to fetch projects:",e),h([])}})()},[v]),(0,a.useEffect)(()=>{if(t){var e,s;let n=new Date(t.startDate),a=new Date(t.endDate);p({title:t.title||"",description:t.description||"",eventType:t.eventType||"meeting",startDate:n.toISOString().split("T")[0],startTime:n.toTimeString().slice(0,5),endDate:a.toISOString().split("T")[0],endTime:a.toTimeString().slice(0,5),location:t.location||"",isOnline:!1!==t.isOnline,participants:(null===(e=t.participants)||void 0===e?void 0:e.join(", "))||"",discussionPoints:(null===(s=t.discussionPoints)||void 0===s?void 0:s.join(", "))||"",reminderMinutes:t.reminderMinutes||15,projectId:t.projectId||"",recurrenceType:t.recurrenceType||"none"})}},[t]);let k=async(e,t)=>{try{await g(e,t)}catch(e){console.error("Failed to create custom event type:",e)}},D=(e,t)=>{p(s=>({...s,[e]:t}))};return(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new Date("".concat(m.startDate,"T").concat(m.startTime)),n=new Date("".concat(m.endDate,"T").concat(m.endTime));s({title:m.title,description:m.description,eventType:m.eventType,startDate:t.toISOString(),endDate:n.toISOString(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,location:m.location||void 0,isOnline:m.isOnline,participants:m.participants?m.participants.split(",").map(e=>e.trim()):[],discussionPoints:m.discussionPoints?m.discussionPoints.split(",").map(e=>e.trim()):[],reminderMinutes:m.reminderMinutes,projectId:m.projectId||void 0,recurrenceType:"none"===m.recurrenceType?void 0:m.recurrenceType})},className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)(N._,{htmlFor:"title",children:"Event Title *"}),(0,n.jsx)(i.I,{id:"title",value:m.title,onChange:e=>D("title",e.target.value),placeholder:"Enter event title",required:!0})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)(N._,{htmlFor:"description",children:"Description"}),(0,n.jsx)(f.g,{id:"description",value:m.description,onChange:e=>D("description",e.target.value),placeholder:"Enter event description",rows:3})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(N._,{htmlFor:"eventType",children:"Event Type *"}),(0,n.jsxs)(r.Ph,{value:m.eventType,onValueChange:e=>{"create_new"===e?x(!0):D("eventType",e)},children:[(0,n.jsx)(r.i4,{children:(0,n.jsx)(r.ki,{})}),(0,n.jsxs)(r.Bw,{children:[(0,n.jsx)(r.Ql,{value:"meeting",children:"Meeting"}),(0,n.jsx)(r.Ql,{value:"workshop",children:"Workshop"}),(0,n.jsx)(r.Ql,{value:"deadline",children:"Deadline"}),(0,n.jsx)(r.Ql,{value:"other",children:"Other"}),j&&j.length>0&&j.map(e=>(0,n.jsx)(r.Ql,{value:e.id,children:e.name},e.id)),(0,n.jsx)(r.Ql,{value:"create_new",className:"font-semibold text-blue-600",children:"+ Create New Event Type"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(N._,{htmlFor:"projectId",children:"Project (Optional)"}),(0,n.jsxs)(r.Ph,{value:m.projectId||"none",onValueChange:e=>D("projectId","none"===e?"":e),children:[(0,n.jsx)(r.i4,{children:(0,n.jsx)(r.ki,{placeholder:"Select a project"})}),(0,n.jsxs)(r.Bw,{children:[(0,n.jsx)(r.Ql,{value:"none",children:"No Project"}),o&&o.length>0&&o.map(e=>(0,n.jsx)(r.Ql,{value:e.id,children:e.name},e.id))]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(N._,{htmlFor:"reminderMinutes",children:"Reminder (minutes)"}),(0,n.jsxs)(r.Ph,{value:m.reminderMinutes.toString(),onValueChange:e=>D("reminderMinutes",parseInt(e)),children:[(0,n.jsx)(r.i4,{children:(0,n.jsx)(r.ki,{})}),(0,n.jsxs)(r.Bw,{children:[(0,n.jsx)(r.Ql,{value:"5",children:"5 minutes"}),(0,n.jsx)(r.Ql,{value:"15",children:"15 minutes"}),(0,n.jsx)(r.Ql,{value:"30",children:"30 minutes"}),(0,n.jsx)(r.Ql,{value:"60",children:"1 hour"}),(0,n.jsx)(r.Ql,{value:"1440",children:"1 day"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(N._,{htmlFor:"recurrenceType",children:"Recurrence"}),(0,n.jsxs)(r.Ph,{value:m.recurrenceType||"none",onValueChange:e=>D("recurrenceType",e),children:[(0,n.jsx)(r.i4,{children:(0,n.jsx)(r.ki,{})}),(0,n.jsxs)(r.Bw,{children:[(0,n.jsx)(r.Ql,{value:"none",children:"No Recurrence"}),(0,n.jsx)(r.Ql,{value:"daily",children:"Daily"}),(0,n.jsx)(r.Ql,{value:"weekly",children:"Weekly"}),(0,n.jsx)(r.Ql,{value:"monthly",children:"Monthly"}),(0,n.jsx)(r.Ql,{value:"yearly",children:"Yearly"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(N._,{htmlFor:"startDate",children:"Start Date *"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(i.I,{id:"startDate",type:"date",value:m.startDate,onChange:e=>D("startDate",e.target.value),required:!0}),(0,n.jsx)(i.I,{type:"time",value:m.startTime,onChange:e=>D("startTime",e.target.value),required:!0})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(N._,{htmlFor:"endDate",children:"End Date *"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(i.I,{id:"endDate",type:"date",value:m.endDate,onChange:e=>D("endDate",e.target.value),required:!0}),(0,n.jsx)(i.I,{type:"time",value:m.endTime,onChange:e=>D("endTime",e.target.value),required:!0})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(N._,{htmlFor:"location",children:"Location"}),(0,n.jsx)(i.I,{id:"location",value:m.location,onChange:e=>D("location",e.target.value),placeholder:"Enter location"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.r,{id:"isOnline",checked:m.isOnline,onCheckedChange:e=>D("isOnline",e)}),(0,n.jsx)(N._,{htmlFor:"isOnline",children:"Online meeting"})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)(N._,{htmlFor:"participants",children:"Participants (comma-separated emails)"}),(0,n.jsx)(i.I,{id:"participants",value:m.participants,onChange:e=>D("participants",e.target.value),placeholder:"email1@example.com, email2@example.com"})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)(N._,{htmlFor:"discussionPoints",children:"Discussion Points (comma-separated)"}),(0,n.jsx)(i.I,{id:"discussionPoints",value:m.discussionPoints,onChange:e=>D("discussionPoints",e.target.value),placeholder:"Point 1, Point 2, Point 3"})]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[(0,n.jsx)(l.z,{type:"button",variant:"outline",onClick:c,children:"Cancel"}),(0,n.jsx)(l.z,{type:"submit",disabled:d,children:d?"Saving...":t?"Update Event":"Create Event"})]}),(0,n.jsx)(T.O,{open:u,onOpenChange:x,title:"Create New Event Type",description:"Create a custom event type that will be available for your tenant.",optionName:"Event Type",placeholder:"e.g., Training Session, Client Meeting",onSubmit:k,loading:y.eventType})]})}var D=s(98734);function S(){let[e,t]=(0,a.useState)([]),[s,m]=(0,a.useState)(!0),[p,v]=(0,a.useState)(""),[j,g]=(0,a.useState)("all"),[f,N]=(0,a.useState)("all"),[b,C]=(0,a.useState)("grid"),[T,S]=(0,a.useState)(!1),[E,P]=(0,a.useState)(!1),_=(0,w.b)(),{user:I}=(0,D.a)();(0,a.useEffect)(()=>{O()},[]);let O=async()=>{try{m(!0);let e=await _.getEvents();t(e.events||[])}catch(e){console.error("Failed to load events:",e)}finally{m(!1)}},F=async s=>{if(confirm("Are you sure you want to delete this event?"))try{await _.deleteEvent(s),t(e.filter(e=>e.id!==s))}catch(e){console.error("Failed to delete event:",e)}},z=async e=>{try{await _.joinEvent(e),O()}catch(e){console.error("Failed to join event:",e)}},Q=async e=>{try{await _.leaveEvent(e),O()}catch(e){console.error("Failed to leave event:",e)}},M=async e=>{try{P(!0),await _.createEvent(e),S(!1),O()}catch(e){console.error("Failed to create event:",e),alert("Failed to create event. Please try again.")}finally{P(!1)}},Z=e.filter(e=>{let t=e.title.toLowerCase().includes(p.toLowerCase())||e.description&&e.description.toLowerCase().includes(p.toLowerCase()),s="all"===j||e.status===j,n="all"===f||e.eventType===f;return t&&s&&n});return s?(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading events..."})]})}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Events"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage and track your events"})]}),(0,n.jsxs)(l.z,{onClick:()=>S(!0),className:"flex items-center gap-2",children:[(0,n.jsx)(d.Z,{className:"h-4 w-4"}),"Create Event"]})]}),(0,n.jsx)(c.Zb,{children:(0,n.jsx)(c.aY,{className:"p-4",children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,n.jsx)(i.I,{placeholder:"Search events...",value:p,onChange:e=>v(e.target.value),className:"pl-10"})]})}),(0,n.jsxs)(r.Ph,{value:j,onValueChange:g,children:[(0,n.jsx)(r.i4,{className:"w-full md:w-40",children:(0,n.jsx)(r.ki,{})}),(0,n.jsx)(r.Bw,{children:[{value:"all",label:"All Statuses"},{value:"scheduled",label:"Scheduled"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}].map(e=>(0,n.jsx)(r.Ql,{value:e.value,children:e.label},e.value))})]}),(0,n.jsxs)(r.Ph,{value:f,onValueChange:N,children:[(0,n.jsx)(r.i4,{className:"w-full md:w-40",children:(0,n.jsx)(r.ki,{})}),(0,n.jsx)(r.Bw,{children:[{value:"all",label:"All Types"},{value:"meeting",label:"Meeting"},{value:"workshop",label:"Workshop"},{value:"deadline",label:"Deadline"},{value:"other",label:"Other"}].map(e=>(0,n.jsx)(r.Ql,{value:e.value,children:e.label},e.value))})]}),(0,n.jsxs)("div",{className:"flex border rounded-lg",children:[(0,n.jsx)(l.z,{variant:"grid"===b?"default":"ghost",size:"sm",onClick:()=>C("grid"),className:"rounded-r-none",children:(0,n.jsx)(h.Z,{className:"h-4 w-4"})}),(0,n.jsx)(l.z,{variant:"list"===b?"default":"ghost",size:"sm",onClick:()=>C("list"),className:"rounded-l-none",children:(0,n.jsx)(u.Z,{className:"h-4 w-4"})})]})]})})}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4"}),(0,n.jsxs)("span",{children:[Z.length," event",1!==Z.length?"s":""," ","found"]})]}),0===Z.length?(0,n.jsx)(c.Zb,{children:(0,n.jsxs)(c.aY,{className:"p-12 text-center",children:[(0,n.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:p||"all"!==j||"all"!==f?"Try adjusting your filters or search terms":"Get started by creating your first event"}),!p&&"all"===j&&"all"===f&&(0,n.jsxs)(l.z,{onClick:()=>S(!0),children:[(0,n.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Create Event"]})]})}):(0,n.jsx)("div",{className:"grid"===b?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:Z.map(e=>(0,n.jsx)(y,{event:e,onEdit:e=>console.log("Edit event:",e),onDelete:F,onJoin:z,onLeave:Q},e.id))}),T&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Create New Event"}),(0,n.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>S(!1),className:"h-8 w-8 p-0",children:"\xd7"})]}),(0,n.jsx)(k,{onSubmit:M,onCancel:()=>S(!1),loading:E})]})})]})}},94589:function(e,t,s){"use strict";s.d(t,{r:function(){return r}});var n=s(57437),a=s(2265),l=s(50721),i=s(93448);let r=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(l.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:(0,n.jsx)(l.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});r.displayName=l.fC.displayName}},function(e){e.O(0,[7846,7648,4259,2709,2451,4975,5448,9515,5200,5372,2971,2117,1744],function(){return e(e.s=66142)}),_N_E=e.O()}]);