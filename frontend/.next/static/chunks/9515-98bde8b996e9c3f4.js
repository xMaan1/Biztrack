"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9515],{12381:function(t,e,r){r.d(e,{z:function(){return l}});var n=r(57437),a=r(2265),s=r(37053),o=r(90535),c=r(93448);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",instagram:"bg-gradient-to-br from-purple-600 via-pink-600 to-orange-400 text-white hover:shadow-lg transform hover:scale-105 transition-all duration-300",facebook:"bg-gradient-to-br from-blue-600 to-blue-800 text-white hover:shadow-lg transform hover:scale-105 transition-all duration-300",glass:"bg-white/20 backdrop-blur-lg border border-white/30 text-gray-800 hover:bg-white/30 shadow-xl"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((t,e)=>{let{className:r,variant:a,size:o,asChild:l=!1,...u}=t,h=l?s.g7:"button";return(0,n.jsx)(h,{className:(0,c.cn)(i({variant:a,size:o,className:r})),ref:e,...u})});l.displayName="Button"},93448:function(t,e,r){r.d(e,{Qm:function(){return c},XO:function(){return h},_$:function(){return l},aX:function(){return d},cn:function(){return s},p6:function(){return o},xG:function(){return u},z2:function(){return i}});var n=r(61994),a=r(53335);function s(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,a.m6)((0,n.W)(e))}function o(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function c(t){return t.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2)}function i(t){switch(t.toLowerCase()){case"completed":case"success":return"success";case"in_progress":case"in-progress":case"active":return"info";case"on_hold":case"on-hold":case"pending":return"warning";case"cancelled":case"error":case"failed":return"destructive";default:return"secondary"}}function l(t){switch(t.toLowerCase()){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-blue-100 text-blue-800 border-blue-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}}function u(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function h(t){switch(t.toLowerCase()){case"completed":case"success":return"✓";case"in_progress":case"in-progress":case"active":return"▶";case"on_hold":case"on-hold":case"pending":return"⏸";case"cancelled":case"error":case"failed":return"✗";case"planning":case"draft":return"\uD83D\uDCDD";default:return"•"}}function d(t){switch(t.toLowerCase()){case"production":return"\uD83C\uDFED";case"maintenance":return"\uD83D\uDD27";case"repair":return"\uD83D\uDEE0️";case"installation":return"\uD83D\uDCE6";case"inspection":return"\uD83D\uDD0D";default:return"\uD83D\uDCCB"}}},89441:function(t,e,r){r.d(e,{Ew:function(){return o},sM:function(){return s}});var n=r(83464),a=r(60621);class s{setTenantId(t){this.currentTenantId=t,t?localStorage.setItem("currentTenantId",t):(localStorage.removeItem("currentTenantId"),localStorage.removeItem("userTenants"))}getTenantId(){return this.currentTenantId?this.currentTenantId:localStorage.getItem("currentTenantId")}setUserTenants(t){localStorage.setItem("userTenants",JSON.stringify(t))}getUserTenants(){{let t=localStorage.getItem("userTenants");if(t)try{return JSON.parse(t)}catch(t){console.error("Error parsing stored tenants:",t),localStorage.removeItem("userTenants")}}return[]}getCurrentTenant(){let t=this.getTenantId();return t&&this.getUserTenants().find(e=>e.id===t)||null}async refreshTenants(){try{let t=await this.getMyTenants();if(t.tenants)return this.setUserTenants(t.tenants),t.tenants;return[]}catch(t){throw console.error("Failed to refresh tenants:",t),t}}setupInterceptors(){this.client.interceptors.request.use(t=>{if(!this.publicEndpoints.some(e=>{var r;return null===(r=t.url)||void 0===r?void 0:r.includes(e)})&&!this.sessionManager.isSessionValid())return Promise.reject(Error("Not authenticated"));let e=this.sessionManager.getToken();e&&(t.headers.Authorization="Bearer ".concat(e));let r=this.getTenantId();return r&&(t.headers["X-Tenant-ID"]=r),t},t=>Promise.reject(t)),this.client.interceptors.response.use(t=>t,async t=>{var e;if((null===(e=t.response)||void 0===e?void 0:e.status)===401){if(await this.sessionManager.refreshAccessToken()){let e=t.config;return e.headers.Authorization="Bearer ".concat(this.sessionManager.getToken()),this.client(e)}this.sessionManager.clearSession()}return Promise.reject(t)})}async get(t,e){return(await this.client.get(t,e)).data}async post(t,e,r){return(await this.client.post(t,e,r)).data}async put(t,e,r){return(await this.client.put(t,e,r)).data}async patch(t,e,r){return(await this.client.patch(t,e,r)).data}async delete(t,e){return(await this.client.delete(t,e)).data}async login(t){try{let e=await this.post("/auth/login",t);if(e.success&&e.token&&e.user){this.sessionManager.setSession(e.token,e.user,e.expires_in,e.refresh_token);try{let t=await this.getMyTenants();t.tenants&&t.tenants.length>0&&(this.setUserTenants(t.tenants),this.setTenantId(t.tenants[0].id))}catch(t){console.warn("Could not fetch tenants:",t)}}return e}catch(t){throw console.error("Login API error:",t),t}}async register(t){return this.post("/auth/register",t)}async getCurrentUser(){return this.get("/auth/me")}async logout(){try{let t=await this.post("/auth/logout");return this.setTenantId(null),t}catch(t){throw this.setTenantId(null),t}}async getUsers(){let t=this.getTenantId();return t?this.getTenantUsers(t):this.get("/users")}async getTenantUsers(t){return this.get("/tenants/".concat(t,"/users"))}async getCurrentTenantUsers(){let t=this.getTenantId();if(!t)throw Error("No tenant selected");return this.getTenantUsers(t)}async getUser(t){return this.get("/users/".concat(t))}async updateUser(t,e){return this.put("/users/".concat(t),e)}async deleteUser(t){return this.delete("/users/".concat(t))}async getPlans(){return this.get("/plans")}async subscribeToPlan(t){return this.post("/tenants/subscribe",t)}async createTenantFromLanding(t){return this.post("/tenants/create-tenant",t)}async getMyTenants(){return this.get("/tenants/my-tenants")}async getTenant(t){return this.get("/tenants/".concat(t))}async switchTenant(t){let e=this.getUserTenants().find(e=>e.id===t);if(!e)throw Error("Access denied to this tenant");return this.setTenantId(t),e}async getProjects(){return this.get("/projects")}async getProject(t){return this.get("/projects/".concat(t))}async createProject(t){return this.post("/projects",t)}async updateProject(t,e){return this.put("/projects/".concat(t),e)}async deleteProject(t){return this.delete("/projects/".concat(t))}async getProjectTeamMembers(){return this.get("/projects/team-members")}async getTasks(t){let e=new URLSearchParams;(null==t?void 0:t.project)&&e.append("project",t.project),(null==t?void 0:t.status)&&e.append("status",t.status),(null==t?void 0:t.assignedTo)&&e.append("assignedTo",t.assignedTo),(null==t?void 0:t.includeSubtasks)!==void 0&&e.append("include_subtasks",t.includeSubtasks.toString()),(null==t?void 0:t.mainTasksOnly)!==void 0&&e.append("main_tasks_only",t.mainTasksOnly.toString()),(null==t?void 0:t.page)&&e.append("page",t.page.toString()),(null==t?void 0:t.limit)&&e.append("limit",t.limit.toString());let r="/tasks".concat(e.toString()?"?".concat(e.toString()):"");return this.get(r)}async getTask(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return this.get("/tasks/".concat(t).concat(e?"?include_subtasks=true":"?include_subtasks=false"))}async createTask(t){return this.post("/tasks",t)}async updateTask(t,e){return this.put("/tasks/".concat(t),e)}async deleteTask(t){return this.delete("/tasks/".concat(t))}async getTasksByProject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.get("/tasks?project=".concat(t).concat(e?"?main_tasks_only=true":""))}async getSubtasks(t){return this.get("/tasks/".concat(t,"/subtasks"))}async createSubtask(t,e){return this.post("/tasks/".concat(t,"/subtasks"),e)}async healthCheck(){return this.get("/health")}async getCustomRoles(t){return this.get("/tenants/".concat(t,"/custom-roles"))}async createCustomRole(t,e){return this.post("/tenants/".concat(t,"/custom-roles"),e)}async updateCustomRole(t,e,r){return this.put("/tenants/".concat(t,"/custom-roles/").concat(e),r)}async deleteCustomRole(t,e){return this.delete("/tenants/".concat(t,"/custom-roles/").concat(e))}async getPermissions(){return this.get("/tenants/permissions")}async testConnection(){try{return await this.get("/health")}catch(t){throw t}}async getEvents(t){try{let e=new URLSearchParams;(null==t?void 0:t.project)&&e.append("project_id",t.project),(null==t?void 0:t.user)&&e.append("user_id",t.user),(null==t?void 0:t.status)&&e.append("status_filter",t.status),(null==t?void 0:t.page)&&e.append("skip",((t.page-1)*(t.limit||100)).toString()),(null==t?void 0:t.limit)&&e.append("limit",t.limit.toString());let r="/events?".concat(e.toString());return await this.get(r)}catch(t){throw t}}async getEvent(t){try{return await this.get("/events/".concat(t))}catch(t){throw t}}async createEvent(t){try{return await this.post("/events",t)}catch(t){throw t}}async updateEvent(t,e){try{return await this.put("/events/".concat(t),e)}catch(t){throw t}}async deleteEvent(t){try{return await this.delete("/events/".concat(t))}catch(t){throw t}}async getUpcomingEvents(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;try{return await this.get("/events/upcoming?days=".concat(t))}catch(t){throw t}}async joinEvent(t){try{return await this.post("/events/".concat(t,"/join"))}catch(t){throw t}}async leaveEvent(t){try{return await this.post("/events/".concat(t,"/leave"))}catch(t){throw t}}async regenerateMeetLink(t){try{return await this.post("/events/".concat(t,"/regenerate-meet-link"))}catch(t){throw t}}async getSalesDashboard(){try{return(await this.client.get("/sales/dashboard")).data}catch(t){throw console.error("Error fetching sales dashboard:",t),t}}async getLeads(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await this.client.get("/sales/leads",{params:t})).data}catch(t){throw console.error("Error fetching leads:",t),t}}async createLead(t){try{return(await this.client.post("/sales/leads",t)).data}catch(t){throw console.error("Error creating lead:",t),t}}async updateLead(t,e){try{return(await this.client.put("/sales/leads/".concat(t),e)).data}catch(t){throw console.error("Error updating lead:",t),t}}async deleteLead(t){try{return(await this.client.delete("/sales/leads/".concat(t))).data}catch(t){throw console.error("Error deleting lead:",t),t}}async getContacts(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await this.client.get("/sales/contacts",{params:t})).data}catch(t){throw console.error("Error fetching contacts:",t),t}}async createContact(t){try{return(await this.client.post("/sales/contacts",t)).data}catch(t){throw console.error("Error creating contact:",t),t}}async updateContact(t,e){try{return(await this.client.put("/sales/contacts/".concat(t),e)).data}catch(t){throw console.error("Error updating contact:",t),t}}async deleteContact(t){try{return(await this.client.delete("/sales/contacts/".concat(t))).data}catch(t){throw console.error("Error deleting contact:",t),t}}async getCompanies(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await this.client.get("/sales/companies",{params:t})).data}catch(t){throw console.error("Error fetching companies:",t),t}}async createCompany(t){try{return(await this.client.post("/sales/companies",t)).data}catch(t){throw console.error("Error creating company:",t),t}}async updateCompany(t,e){try{return(await this.client.put("/sales/companies/".concat(t),e)).data}catch(t){throw console.error("Error updating company:",t),t}}async deleteCompany(t){try{return(await this.client.delete("/sales/companies/".concat(t))).data}catch(t){throw console.error("Error deleting company:",t),t}}async getOpportunities(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await this.client.get("/sales/opportunities",{params:t})).data}catch(t){throw console.error("Error fetching opportunities:",t),t}}async createOpportunity(t){try{return(await this.client.post("/sales/opportunities",t)).data}catch(t){throw console.error("Error creating opportunity:",t),t}}async updateOpportunity(t,e){try{return(await this.client.put("/sales/opportunities/".concat(t),e)).data}catch(t){throw console.error("Error updating opportunity:",t),t}}async deleteOpportunity(t){try{return(await this.client.delete("/sales/opportunities/".concat(t))).data}catch(t){throw console.error("Error deleting opportunity:",t),t}}async getQuotes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await this.client.get("/sales/quotes",{params:t})).data}catch(t){throw console.error("Error fetching quotes:",t),t}}async createQuote(t){try{return(await this.client.post("/sales/quotes",t)).data}catch(t){throw console.error("Error creating quote:",t),t}}async updateQuote(t,e){try{return(await this.client.put("/sales/quotes/".concat(t),e)).data}catch(t){throw console.error("Error updating quote:",t),t}}async deleteQuote(t){try{return(await this.client.delete("/sales/quotes/".concat(t))).data}catch(t){throw console.error("Error deleting quote:",t),t}}async getContracts(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await this.client.get("/sales/contracts",{params:t})).data}catch(t){throw console.error("Error fetching contracts:",t),t}}async createContract(t){try{return(await this.client.post("/sales/contracts",t)).data}catch(t){throw console.error("Error creating contract:",t),t}}async updateContract(t,e){try{return(await this.client.put("/sales/contracts/".concat(t),e)).data}catch(t){throw console.error("Error updating contract:",t),t}}async deleteContract(t){try{return(await this.client.delete("/sales/contracts/".concat(t))).data}catch(t){throw console.error("Error deleting contract:",t),t}}async getSalesActivities(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await this.client.get("/sales/activities",{params:t})).data}catch(t){throw console.error("Error fetching sales activities:",t),t}}async createSalesActivity(t){try{return(await this.client.post("/sales/activities",t)).data}catch(t){throw console.error("Error creating sales activity:",t),t}}async getRevenueAnalytics(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"monthly",e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;try{let n={period:t};return e&&(n.start_date=e),r&&(n.end_date=r),(await this.client.get("/sales/analytics/revenue",{params:n})).data}catch(t){throw console.error("Error fetching revenue analytics:",t),t}}async getConversionAnalytics(){try{return(await this.client.get("/sales/analytics/conversion")).data}catch(t){throw console.error("Error fetching conversion analytics:",t),t}}async getWorkOrders(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await this.client.get("/work-orders",{params:t})).data}catch(t){throw console.error("Error fetching work orders:",t),t}}async getWorkOrderStats(){try{return(await this.client.get("/work-orders/stats")).data}catch(t){throw console.error("Error fetching work order stats:",t),t}}async getWorkOrderById(t){try{return(await this.client.get("/work-orders/".concat(t))).data}catch(t){throw console.error("Error fetching work order:",t),t}}async createWorkOrder(t){try{return(await this.client.post("/work-orders",t)).data}catch(t){throw console.error("Error creating work order:",t),t}}async updateWorkOrder(t,e){try{return(await this.client.put("/work-orders/".concat(t),e)).data}catch(t){throw console.error("Error updating work order:",t),t}}async deleteWorkOrder(t){try{return(await this.client.delete("/work-orders/".concat(t))).data}catch(t){throw console.error("Error deleting work order:",t),t}}constructor(){this.publicEndpoints=["/auth/login","/auth/register","/public/plans"],this.currentTenantId=null,this.sessionManager=new a.S,this.client=n.Z.create({baseURL:"http://127.0.0.1:8000",headers:{"Content-Type":"application/json"},timeout:1e4}),this.currentTenantId=localStorage.getItem("currentTenantId"),this.setupInterceptors()}}let o=new s;e.ZP=o},60621:function(t,e,r){r.d(e,{S:function(){return n}});class n{setCookie(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,n=new Date;n.setTime(n.getTime()+864e5*r),document.cookie="".concat(t,"=").concat(e,";expires=").concat(n.toUTCString(),";path=/;SameSite=Strict")}getCookie(t){let e=t+"=",r=document.cookie.split(";");for(let t=0;t<r.length;t++){let n=r[t];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return null}removeCookie(t){document.cookie="".concat(t,"=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;")}setToken(t,e){if(localStorage.setItem(this.TOKEN_KEY,t),this.setCookie(this.COOKIE_TOKEN_KEY,t,e?Math.ceil(e/86400):7),e){let t=Date.now()+1e3*e;localStorage.setItem(this.EXPIRES_KEY,t.toString())}}getToken(){let t=localStorage.getItem(this.TOKEN_KEY);t||(t=this.getCookie(this.COOKIE_TOKEN_KEY));let e=localStorage.getItem(this.EXPIRES_KEY);return t&&e&&Date.now()>parseInt(e)?(this.clearSession(),null):t}removeToken(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.EXPIRES_KEY),this.removeCookie(this.COOKIE_TOKEN_KEY)}setRefreshToken(t){localStorage.setItem(this.REFRESH_TOKEN_KEY,t)}getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}removeRefreshToken(){localStorage.removeItem(this.REFRESH_TOKEN_KEY)}setUser(t){localStorage.setItem(this.USER_KEY,JSON.stringify(t))}getUser(){let t=localStorage.getItem(this.USER_KEY);if(!t)return null;try{return JSON.parse(t)}catch(t){return console.error("Error parsing user data:",t),this.removeUser(),null}}removeUser(){localStorage.removeItem(this.USER_KEY)}setSession(t,e,r,n){this.setToken(t,r),this.setUser(e),n&&this.setRefreshToken(n)}getSession(){let t=this.getToken(),e=this.getUser();if(!t||!e)return null;let r=localStorage.getItem(this.EXPIRES_KEY),n=this.getRefreshToken();return{token:t,user:e,expiresAt:r?parseInt(r):void 0,refreshToken:n||void 0}}clearSession(){this.removeToken(),this.removeUser(),this.removeRefreshToken(),localStorage.removeItem("currentTenantId"),localStorage.removeItem("userTenants"),this.removeCookie(this.COOKIE_TOKEN_KEY)}isSessionValid(){let t=this.getToken(),e=this.getUser();return!!(t&&e)}isTokenExpired(){let t=localStorage.getItem(this.EXPIRES_KEY);return!!t&&Date.now()>parseInt(t)}async refreshAccessToken(){try{let t=this.getRefreshToken();if(!t)return!1;let e=await fetch("".concat("http://127.0.0.1:8000","/api/v1/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:t})});if(e.ok){let t=await e.json();return this.setToken(t.access_token,t.expires_in),!0}return!1}catch(t){return console.error("Error refreshing access token:",t),!1}}refreshSession(){return!this.isTokenExpired()}onSessionExpired(t){setInterval(async()=>{this.isTokenExpired()&&!await this.refreshAccessToken()&&(this.clearSession(),t())},6e4)}getTokenExpirationTime(){let t=localStorage.getItem(this.EXPIRES_KEY);return t?new Date(parseInt(t)):null}getTimeUntilExpiration(){let t=this.getTokenExpirationTime();return t?Math.max(0,t.getTime()-Date.now()):null}getSessionInfo(){return{hasToken:!!this.getToken(),hasUser:!!this.getUser(),isExpired:this.isTokenExpired(),expiresAt:this.getTokenExpirationTime(),timeUntilExpiration:this.getTimeUntilExpiration()}}constructor(){this.TOKEN_KEY="auth_token",this.USER_KEY="user_data",this.EXPIRES_KEY="token_expires",this.REFRESH_TOKEN_KEY="refresh_token",this.COOKIE_TOKEN_KEY="auth-token"}}}}]);