"use strict";exports.id=679,exports.ids=[679],exports.modules={29272:(e,s,a)=>{a.d(s,{cl:()=>t.default});var t=a(62760);a(63102),a(17676)},56556:(e,s,a)=>{a.d(s,{sD:()=>C,ax:()=>G});var t=a(10326),l=a(17577),r=a(29752),i=a(91664),n=a(38443),d=a(3594),c=a(33269),o=a(231),x=a(70003),m=a(98091),u=a(79635),h=a(37358),j=a(81538),p=a(83855),g=a(96633),N=a(941),f=a(2179),b=a(53982),y=a(10143),v=a(5109);let w=e=>{switch(e){case v.T.CRITICAL:return t.jsx(n.C,{className:"bg-red-100 text-red-800 border-red-200",children:"Critical"});case v.T.HIGH:return t.jsx(n.C,{className:"bg-orange-100 text-orange-800 border-orange-200",children:"High"});case v.T.MEDIUM:return t.jsx(n.C,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Medium"});case v.T.LOW:return t.jsx(n.C,{className:"bg-green-100 text-green-800 border-green-200",children:"Low"});default:return t.jsx(n.C,{variant:"secondary",children:"Unknown"})}},k=e=>{switch(e){case v.h.TODO:return t.jsx(n.C,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"To Do"});case v.h.IN_PROGRESS:return t.jsx(n.C,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"In Progress"});case v.h.COMPLETED:return t.jsx(n.C,{className:"bg-green-100 text-green-800 border-green-200",children:"Completed"});case v.h.CANCELLED:return t.jsx(n.C,{className:"bg-red-100 text-red-800 border-red-200",children:"Cancelled"});default:return t.jsx(n.C,{variant:"secondary",children:"Unknown"})}},C=({task:e,onEdit:s,onDelete:a,onStatusChange:C,onAddSubtask:T,onEditSubtask:D,onDeleteSubtask:E,onSubtaskStatusChange:S})=>{let[O,Z]=(0,l.useState)(!1),[P,A]=(0,l.useState)(!1),[I,H]=(0,l.useState)(null),z=e.subtaskCount>0?Math.round(e.completedSubtaskCount/e.subtaskCount*100):e.status===v.h.COMPLETED?100:0;return t.jsx(r.Zb,{className:"modern-card relative",children:(0,t.jsxs)(r.aY,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[t.jsx("div",{className:"flex-1 pr-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title})}),(0,t.jsxs)(y.h_,{open:P,onOpenChange:A,children:[t.jsx(y.$F,{asChild:!0,children:t.jsx(i.z,{variant:"ghost",size:"icon",className:"ml-2",children:t.jsx(o.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(y.AW,{align:"end",children:[(0,t.jsxs)(y.Xi,{onClick:()=>s?.(e),children:[t.jsx(x.Z,{className:"mr-2 h-4 w-4"})," Edit Task"]}),t.jsx(y.VD,{}),t.jsx(y.Xi,{onClick:()=>C?.(e.id,v.h.TODO),children:"To Do"}),t.jsx(y.Xi,{onClick:()=>C?.(e.id,v.h.IN_PROGRESS),children:"In Progress"}),t.jsx(y.Xi,{onClick:()=>C?.(e.id,v.h.COMPLETED),children:"Completed"}),t.jsx(y.VD,{}),(0,t.jsxs)(y.Xi,{onClick:()=>a?.(e.id),className:"text-red-600",children:[t.jsx(m.Z,{className:"mr-2 h-4 w-4"})," Delete Task"]})]})]})]}),e.description&&t.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:e.description}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2 flex-wrap",children:[k(e.status),w(e.priority),e.tags.map((e,s)=>t.jsx(n.C,{variant:"outline",className:"text-xs border-gray-300 text-gray-600",children:e},s))]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-2 flex-wrap",children:[e.assignedTo&&e.assignedTo.name&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(u.Z,{className:"h-4 w-4 text-gray-400"}),t.jsx(d.qE,{className:"h-6 w-6",children:t.jsx(d.Q5,{className:"text-xs bg-gradient-primary text-white",children:e.assignedTo.name.charAt(0)})}),t.jsx("span",{className:"text-xs text-gray-700",children:e.assignedTo.name})]}),e.dueDate&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(h.Z,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-700",children:new Date(e.dueDate).toLocaleDateString()})]}),e.estimatedHours&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(j.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("span",{className:"text-xs text-gray-700",children:[e.actualHours,"h / ",e.estimatedHours,"h"]})]})]}),e.subtaskCount>0&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["Subtasks (",e.completedSubtaskCount,"/",e.subtaskCount,")"]}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[z,"%"]})]}),t.jsx(c.E,{value:z,className:"h-2 rounded bg-gray-200"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,t.jsxs)("div",{className:"flex gap-1",children:[T&&t.jsx(i.z,{variant:"ghost",size:"icon",onClick:()=>T(e.id),title:"Add Subtask",children:t.jsx(p.Z,{className:"h-4 w-4"})}),e.subtaskCount>0&&t.jsx(i.z,{variant:"ghost",size:"icon",onClick:()=>Z(!O),title:O?"Hide Subtasks":"Show Subtasks",children:O?t.jsx(g.Z,{className:"h-4 w-4"}):t.jsx(N.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]}),O&&t.jsx("div",{className:"mt-3 border-t pt-2 space-y-2",children:(e.subtasks||[]).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 pl-4 group",children:[t.jsx("button",{className:"flex items-center justify-center h-5 w-5 rounded-full border border-gray-300 bg-white text-gray-400 hover:bg-gray-100 focus:outline-none","aria-label":"Toggle subtask status",onClick:()=>S?.(e.id,e.status===v.h.COMPLETED?v.h.TODO:v.h.COMPLETED),children:e.status===v.h.COMPLETED?t.jsx(f.Z,{className:"h-4 w-4 text-green-600"}):t.jsx(b.Z,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("span",{className:e.status===v.h.COMPLETED?"line-through opacity-70 text-gray-500":"",children:e.title}),(0,t.jsxs)("div",{className:"flex gap-2 items-center text-xs mt-1",children:[w(e.priority),e.assignedTo&&e.assignedTo.name&&(0,t.jsxs)("span",{className:"text-gray-500",children:["@",e.assignedTo.name]}),e.dueDate&&(0,t.jsxs)("span",{className:"text-gray-400",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]})]})]}),(0,t.jsxs)(y.h_,{open:I===e.id,onOpenChange:s=>H(s?e.id:null),children:[t.jsx(y.$F,{asChild:!0,children:t.jsx(i.z,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100",children:t.jsx(o.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(y.AW,{align:"end",children:[(0,t.jsxs)(y.Xi,{onClick:()=>D?.(e),children:[t.jsx(x.Z,{className:"mr-2 h-4 w-4"})," Edit Subtask"]}),t.jsx(y.VD,{}),(0,t.jsxs)(y.Xi,{onClick:()=>E?.(e.id),className:"text-red-600",children:[t.jsx(m.Z,{className:"mr-2 h-4 w-4"})," Delete Subtask"]})]})]})]},e.id))})]})})};var T=a(24118),D=a(41190),E=a(82015),S=a(44794),O=a(33261),Z=a(29280),P=a(87888),A=a(94019),I=a(75290);let H=[{value:v.h.TODO,label:"To Do"},{value:v.h.IN_PROGRESS,label:"In Progress"},{value:v.h.COMPLETED,label:"Completed"},{value:v.h.CANCELLED,label:"Cancelled"}],z=[{value:v.T.LOW,label:"Low"},{value:v.T.MEDIUM,label:"Medium"},{value:v.T.HIGH,label:"High"},{value:v.T.CRITICAL,label:"Critical"}],L=({open:e,onClose:s,onSubmit:a,task:r,projects:d,users:c,parentTask:o,loading:x=!1,error:m,defaultProjectId:u})=>{let[j,g]=(0,l.useState)({title:"",description:"",status:v.h.TODO,priority:v.T.MEDIUM,project:"",assignedTo:"",dueDate:"",estimatedHours:0,actualHours:0,tags:[]}),[N,f]=(0,l.useState)(""),b=!!r,y=!!o;(0,l.useEffect)(()=>{r?g({title:r.title,description:r.description||"",status:r.status,priority:r.priority,assignedTo:r.assignedTo?.id||"unassigned",dueDate:r.dueDate||"",estimatedHours:r.estimatedHours||0,actualHours:r.actualHours||0,tags:r.tags||[]}):g({title:"",description:"",status:v.h.TODO,priority:v.T.MEDIUM,project:u||"",parentTaskId:o?.id,assignedTo:"unassigned",dueDate:"",estimatedHours:0,actualHours:0,tags:[]})},[r,o,u]);let w=(e,s)=>{g(a=>({...a,[e]:s}))},k=()=>{let e=N.trim();e&&!j.tags?.includes(e)&&(w("tags",[...j.tags||[],e]),f(""))},C=e=>{w("tags",j.tags?.filter(s=>s!==e)||[])},L=()=>{f(""),s()};return t.jsx(T.Vq,{open:e,onOpenChange:L,children:(0,t.jsxs)(T.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(T.fK,{children:[t.jsx(T.$N,{className:"text-xl font-semibold bg-gradient-primary bg-clip-text text-transparent",children:b?`Edit ${y?"Subtask":"Task"}`:`Create ${y?"Subtask":"Task"}`}),o&&(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Parent Task: ",o.title]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[m&&(0,t.jsxs)(O.bZ,{variant:"destructive",children:[t.jsx(P.Z,{className:"h-4 w-4"}),t.jsx(O.X,{children:m})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx(S._,{htmlFor:"title",children:"Title *"}),t.jsx(D.I,{id:"title",value:j.title,onChange:e=>w("title",e.target.value),placeholder:"Enter task title",className:"mt-1"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx(S._,{htmlFor:"description",children:"Description"}),t.jsx(E.g,{id:"description",value:j.description,onChange:e=>w("description",e.target.value),placeholder:"Enter task description",rows:3,className:"mt-1"})]}),(0,t.jsxs)("div",{children:[t.jsx(S._,{htmlFor:"status",children:"Status"}),(0,t.jsxs)(Z.Ph,{value:j.status,onValueChange:e=>w("status",e),children:[t.jsx(Z.i4,{className:"mt-1",children:t.jsx(Z.ki,{placeholder:"Select status"})}),t.jsx(Z.Bw,{children:H.map(e=>t.jsx(Z.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{children:[t.jsx(S._,{htmlFor:"priority",children:"Priority"}),(0,t.jsxs)(Z.Ph,{value:j.priority,onValueChange:e=>w("priority",e),children:[t.jsx(Z.i4,{className:"mt-1",children:t.jsx(Z.ki,{placeholder:"Select priority"})}),t.jsx(Z.Bw,{children:z.map(e=>t.jsx(Z.Ql,{value:e.value,children:e.label},e.value))})]})]}),!y&&(0,t.jsxs)("div",{children:[t.jsx(S._,{htmlFor:"project",children:"Project *"}),(0,t.jsxs)(Z.Ph,{value:r?"object"==typeof r.project&&r.project&&"id"in r.project?r.project.id:"string"==typeof r.project?r.project:"":j.project,onValueChange:e=>w("project",e),disabled:!!r,children:[t.jsx(Z.i4,{className:"mt-1",children:t.jsx(Z.ki,{placeholder:"Select project"})}),t.jsx(Z.Bw,{children:d.map(e=>t.jsx(Z.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{children:[t.jsx(S._,{htmlFor:"assignedTo",children:"Assigned To"}),(0,t.jsxs)(Z.Ph,{value:j.assignedTo,onValueChange:e=>w("assignedTo",e),children:[t.jsx(Z.i4,{className:"mt-1",children:t.jsx(Z.ki,{placeholder:"Select assignee"})}),(0,t.jsxs)(Z.Bw,{children:[t.jsx(Z.Ql,{value:"unassigned",children:"Unassigned"}),c.map(e=>(0,t.jsxs)(Z.Ql,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]})]}),(0,t.jsxs)("div",{children:[t.jsx(S._,{htmlFor:"dueDate",children:"Due Date"}),(0,t.jsxs)("div",{className:"relative mt-1",children:[t.jsx(D.I,{id:"dueDate",type:"date",value:j.dueDate,onChange:e=>w("dueDate",e.target.value),className:"pl-10"}),t.jsx(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"})]})]}),(0,t.jsxs)("div",{children:[t.jsx(S._,{htmlFor:"estimatedHours",children:"Estimated Hours"}),t.jsx(D.I,{id:"estimatedHours",type:"number",value:j.estimatedHours,onChange:e=>w("estimatedHours",parseFloat(e.target.value)||0),min:"0",step:"0.5",className:"mt-1"})]}),b&&(0,t.jsxs)("div",{children:[t.jsx(S._,{htmlFor:"actualHours",children:"Actual Hours"}),t.jsx(D.I,{id:"actualHours",type:"number",value:j.actualHours,onChange:e=>w("actualHours",parseFloat(e.target.value)||0),min:"0",step:"0.5",className:"mt-1"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx(S._,{children:"Tags"}),(0,t.jsxs)("div",{className:"mt-1",children:[t.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:j.tags?.map((e,s)=>t.jsxs(n.C,{variant:"secondary",className:"flex items-center gap-1",children:[e,t.jsx("button",{type:"button",onClick:()=>C(e),className:"ml-1 hover:text-red-600",children:t.jsx(A.Z,{className:"h-3 w-3"})})]},s))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(D.I,{placeholder:"Add tag",value:N,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),k())},className:"flex-1"}),t.jsx(i.z,{type:"button",onClick:k,variant:"outline",size:"sm",children:t.jsx(p.Z,{className:"h-4 w-4"})})]})]})]})]})]}),(0,t.jsxs)(T.cN,{children:[t.jsx(i.z,{type:"button",variant:"outline",onClick:L,disabled:x,children:"Cancel"}),(0,t.jsxs)(i.z,{type:"button",onClick:()=>{let e={...j};e.description?.trim()||delete e.description,"unassigned"===e.assignedTo&&delete e.assignedTo,e.dueDate||delete e.dueDate,e.estimatedHours||delete e.estimatedHours,e.actualHours||delete e.actualHours,e.tags?.length||delete e.tags,a(e)},disabled:x||!j.title.trim()||!y&&!r&&!j.project,className:"modern-button",children:[x&&t.jsx(I.Z,{className:"mr-2 h-4 w-4 animate-spin"}),x?"Saving...":b?"Update":"Create"]})]})]})})};var M=a(21405),R=a(36234),_=a(48998),F=a(88307),V=a(41137),Q=a(91470),U=a(41485),$=a(51223);let G=({projectId:e,showProjectFilter:s=!0})=>{let[a,n]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[o,x]=(0,l.useState)([]),[m,u]=(0,l.useState)(!0),[h,j]=(0,l.useState)(null),[g,N]=(0,l.useState)(!1),[b,y]=(0,l.useState)(null),[w,k]=(0,l.useState)(null),[T,E]=(0,l.useState)(!1),[S,O]=(0,l.useState)(null),[P,A]=(0,l.useState)({project:e||"",status:"",assignedTo:"",search:"",mainTasksOnly:!1}),[H,z]=(0,l.useState)(1),[G,Y]=(0,l.useState)(1),[B,X]=(0,l.useState)(0);(0,l.useEffect)(()=>{W()},[]),(0,l.useEffect)(()=>{q()},[P,H]);let W=async()=>{try{let[e,s]=await Promise.all([U.Ew.getProjects(),U.Ew.getUsers()]);c(e.projects||[]),x(s.users||[])}catch(e){console.error("Failed to load initial data:",e),j("Failed to load projects and users")}},q=async()=>{try{u(!0),j(null);let e={page:H,limit:10,includeSubtasks:!0,mainTasksOnly:P.mainTasksOnly,...P.project&&{project:P.project},...P.status&&{status:P.status},...P.assignedTo&&{assignedTo:P.assignedTo}},s=await U.Ew.getTasks(e),a=[];if(Array.isArray(s)?a=s:s.tasks&&Array.isArray(s.tasks)?a=s.tasks:s.data&&Array.isArray(s.data)?a=s.data:(console.warn("Unexpected response structure:",s),a=[]),P.search){let e=P.search.toLowerCase();a=a.filter(s=>s.title&&s.title.toLowerCase().includes(e)||s.description&&s.description.toLowerCase().includes(e)||Array.isArray(s.tags)&&s.tags.some(s=>s&&s.toLowerCase().includes(e)))}n(a),Y(s.pagination?.pages||1),X(s.pagination?.total||a.length)}catch(e){console.error("Failed to load tasks:",e),j("Failed to load tasks")}finally{u(!1)}},K=()=>{y(null),k(null),O(null),N(!0)},J=e=>{y(e),k(null),O(null),N(!0)},ee=e=>{let s=a.find(s=>s.id===e);s&&(y(null),k(s),O(null),N(!0))},es=e=>{y({...e,project:a.find(s=>s.subtasks.some(s=>s.id===e.id))?.project||"",subtasks:[],subtaskCount:0,completedSubtaskCount:0}),k(null),O(null),N(!0)},ea=async e=>{try{E(!0),O(null),b?await U.Ew.updateTask(b.id,e):w?await U.Ew.createSubtask(w.id,e):await U.Ew.createTask(e),N(!1),y(null),k(null),await q()}catch(e){console.error("Failed to save task:",e),O(e.response?.data?.detail||"Failed to save task")}finally{E(!1)}},et=async e=>{if(confirm("Are you sure you want to delete this task?"))try{await U.Ew.deleteTask(e),await q()}catch(e){console.error("Failed to delete task:",e),j("Failed to delete task")}},el=async e=>{if(confirm("Are you sure you want to delete this subtask?"))try{await U.Ew.deleteTask(e),await q()}catch(e){console.error("Failed to delete subtask:",e),j("Failed to delete subtask")}},er=async(e,s)=>{try{await U.Ew.updateTask(e,{status:s}),await q()}catch(e){console.error("Failed to update task status:",e),j("Failed to update task status")}},ei=(e,s)=>{let a="all"===s?"":s;A(s=>({...s,[e]:a})),z(1)},en=(()=>{let e=a.length;return{totalTasks:e,completedTasks:a.filter(e=>e.status===v.h.COMPLETED).length,inProgressTasks:a.filter(e=>e.status===v.h.IN_PROGRESS).length,todoTasks:a.filter(e=>e.status===v.h.TODO).length}})();return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Tasks"}),B>0&&(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:[B," tasks total"]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx(i.z,{variant:"outline",size:"icon",onClick:q,disabled:m,children:t.jsx(M.Z,{className:(0,$.cn)("h-4 w-4",m&&"animate-spin")})}),(0,t.jsxs)(i.z,{onClick:K,className:"modern-button",children:[t.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Add Task"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(r.Zb,{className:"modern-card",children:t.jsx(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(f.Z,{className:"h-5 w-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:en.totalTasks}),t.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"})]})]})})}),t.jsx(r.Zb,{className:"modern-card",children:t.jsx(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(f.Z,{className:"h-5 w-5 text-green-600"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:en.completedTasks}),t.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})]})})}),t.jsx(r.Zb,{className:"modern-card",children:t.jsx(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(R.Z,{className:"h-5 w-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:en.inProgressTasks}),t.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]})]})})}),t.jsx(r.Zb,{className:"modern-card",children:t.jsx(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:t.jsx(_.Z,{className:"h-5 w-5 text-yellow-600"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:en.todoTasks}),t.jsx("p",{className:"text-sm text-gray-600",children:"To Do"})]})]})})})]}),t.jsx(r.Zb,{className:"modern-card",children:t.jsx(r.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[t.jsx("div",{className:"md:col-span-2",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(F.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t.jsx(D.I,{placeholder:"Search tasks...",value:P.search,onChange:e=>ei("search",e.target.value),className:"pl-10"})]})}),s&&t.jsx("div",{children:(0,t.jsxs)(Z.Ph,{value:P.project||"all",onValueChange:e=>ei("project",e),children:[t.jsx(Z.i4,{children:t.jsx(Z.ki,{placeholder:"All Projects"})}),(0,t.jsxs)(Z.Bw,{children:[t.jsx(Z.Ql,{value:"all",children:"All Projects"}),d.map(e=>t.jsx(Z.Ql,{value:e.id,children:e.name},e.id))]})]})}),t.jsx("div",{children:(0,t.jsxs)(Z.Ph,{value:P.status||"all",onValueChange:e=>ei("status",e),children:[t.jsx(Z.i4,{children:t.jsx(Z.ki,{placeholder:"All Status"})}),(0,t.jsxs)(Z.Bw,{children:[t.jsx(Z.Ql,{value:"all",children:"All Status"}),t.jsx(Z.Ql,{value:v.h.TODO,children:"To Do"}),t.jsx(Z.Ql,{value:v.h.IN_PROGRESS,children:"In Progress"}),t.jsx(Z.Ql,{value:v.h.COMPLETED,children:"Completed"}),t.jsx(Z.Ql,{value:v.h.CANCELLED,children:"Cancelled"})]})]})}),t.jsx("div",{children:(0,t.jsxs)(Z.Ph,{value:P.assignedTo||"all",onValueChange:e=>ei("assignedTo",e),children:[t.jsx(Z.i4,{children:t.jsx(Z.ki,{placeholder:"All Users"})}),(0,t.jsxs)(Z.Bw,{children:[t.jsx(Z.Ql,{value:"all",children:"All Users"}),o.map(e=>t.jsx(Z.Ql,{value:e.id||e.userId||"",children:`${e.firstName??""} ${e.lastName??""}`.trim()||e.userName},e.id||e.userId||""))]})]})}),t.jsx("div",{children:(0,t.jsxs)(Z.Ph,{value:P.mainTasksOnly?"main":"all",onValueChange:e=>ei("mainTasksOnly","main"===e),children:[t.jsx(Z.i4,{children:t.jsx(Z.ki,{placeholder:"View"})}),(0,t.jsxs)(Z.Bw,{children:[t.jsx(Z.Ql,{value:"all",children:"All Tasks"}),t.jsx(Z.Ql,{value:"main",children:"Main Tasks Only"})]})]})}),t.jsx("div",{children:(0,t.jsxs)(i.z,{variant:"outline",onClick:()=>{A({project:e||"",status:"",assignedTo:"",search:"",mainTasksOnly:!1}),z(1)},className:"w-full",children:[t.jsx(V.Z,{className:"h-4 w-4 mr-2"}),"Clear"]})})]})})}),h&&t.jsx(r.Zb,{className:"border-red-200 bg-red-50",children:t.jsx(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[t.jsx(Q.Z,{className:"h-4 w-4"}),t.jsx("span",{children:h}),t.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>j(null),className:"ml-auto text-red-600 hover:text-red-800",children:"\xd7"})]})})}),m&&t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(I.Z,{className:"h-8 w-8 animate-spin text-blue-600"})}),!m&&t.jsx(t.Fragment,{children:0===a.length?t.jsx(r.Zb,{className:"modern-card",children:(0,t.jsxs)(r.aY,{className:"p-8 text-center",children:[t.jsx(f.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tasks found"}),t.jsx("p",{className:"text-gray-600 mb-4",children:Object.values(P).some(e=>e)?"Try adjusting your filters or create a new task.":"Get started by creating your first task."}),(0,t.jsxs)(i.z,{onClick:K,className:"modern-button",children:[t.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Create Task"]})]})}):(0,t.jsxs)("div",{className:"space-y-4",children:[a.map(e=>t.jsx(C,{task:e,onEdit:J,onDelete:et,onStatusChange:er,onAddSubtask:ee,onEditSubtask:es,onDeleteSubtask:el,onSubtaskStatusChange:er},e.id)),G>1&&(0,t.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[t.jsx(i.z,{variant:"outline",onClick:()=>z(Math.max(1,H-1)),disabled:1===H,children:"Previous"}),t.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:Math.min(5,G)},(e,s)=>{let a=s+1;return t.jsx(i.z,{variant:H===a?"default":"outline",size:"sm",onClick:()=>z(a),children:a},a)})}),t.jsx(i.z,{variant:"outline",onClick:()=>z(Math.min(G,H+1)),disabled:H===G,children:"Next"})]})]})}),t.jsx(L,{open:g,onClose:()=>N(!1),onSubmit:ea,task:b??void 0,parentTask:w??void 0,projects:d,users:o.map(e=>({id:e.id||e.userId||"",name:`${e.firstName??""} ${e.lastName??""}`.trim()||e.userName,email:e.email})),loading:T,error:S??void 0,defaultProjectId:e})]})}},24118:(e,s,a)=>{a.d(s,{$N:()=>j,Be:()=>p,Vq:()=>d,cN:()=>h,cZ:()=>m,fK:()=>u,hg:()=>c});var t=a(10326),l=a(17577),r=a(98958),i=a(94019),n=a(51223);let d=r.fC,c=r.xz,o=r.h_;r.x8;let x=l.forwardRef(({className:e,...s},a)=>t.jsx(r.aV,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));x.displayName=r.aV.displayName;let m=l.forwardRef(({className:e,children:s,...a},l)=>(0,t.jsxs)(o,{children:[t.jsx(x,{}),(0,t.jsxs)(r.VY,{ref:l,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[s,(0,t.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(i.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=r.VY.displayName;let u=({className:e,...s})=>t.jsx("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});u.displayName="DialogHeader";let h=({className:e,...s})=>t.jsx("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});h.displayName="DialogFooter";let j=l.forwardRef(({className:e,...s},a)=>t.jsx(r.Dx,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));j.displayName=r.Dx.displayName;let p=l.forwardRef(({className:e,...s},a)=>t.jsx(r.dk,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));p.displayName=r.dk.displayName},33269:(e,s,a)=>{a.d(s,{E:()=>n});var t=a(10326),l=a(17577),r=a(87273),i=a(51223);let n=l.forwardRef(({className:e,value:s,...a},l)=>t.jsx(r.fC,{ref:l,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:t.jsx(r.z$,{className:"h-full w-full flex-1 bg-gradient-to-r from-blue-500 to-purple-600 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));n.displayName=r.fC.displayName},29280:(e,s,a)=>{a.d(s,{Bw:()=>j,Ph:()=>o,Ql:()=>p,i4:()=>m,ki:()=>x});var t=a(10326),l=a(17577),r=a(38785),i=a(941),n=a(96633),d=a(32933),c=a(51223);let o=r.fC;r.ZA;let x=r.B4,m=l.forwardRef(({className:e,children:s,...a},l)=>(0,t.jsxs)(r.xz,{ref:l,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,t.jsx(r.JO,{asChild:!0,children:t.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=r.xz.displayName;let u=l.forwardRef(({className:e,...s},a)=>t.jsx(r.u_,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(n.Z,{className:"h-4 w-4"})}));u.displayName=r.u_.displayName;let h=l.forwardRef(({className:e,...s},a)=>t.jsx(r.$G,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(i.Z,{className:"h-4 w-4"})}));h.displayName=r.$G.displayName;let j=l.forwardRef(({className:e,children:s,position:a="popper",...l},i)=>t.jsx(r.h_,{children:(0,t.jsxs)(r.VY,{ref:i,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...l,children:[t.jsx(u,{}),t.jsx(r.l_,{className:(0,c.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),t.jsx(h,{})]})}));j.displayName=r.VY.displayName,l.forwardRef(({className:e,...s},a)=>t.jsx(r.__,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=r.__.displayName;let p=l.forwardRef(({className:e,children:s,...a},l)=>(0,t.jsxs)(r.ck,{ref:l,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(r.wU,{children:t.jsx(d.Z,{className:"h-4 w-4"})})}),t.jsx(r.eT,{children:s})]}));p.displayName=r.ck.displayName,l.forwardRef(({className:e,...s},a)=>t.jsx(r.Z0,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=r.Z0.displayName},82015:(e,s,a)=>{a.d(s,{g:()=>i});var t=a(10326),l=a(17577),r=a(51223);let i=l.forwardRef(({className:e,...s},a)=>t.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Textarea"},5109:(e,s,a)=>{var t,l;a.d(s,{T:()=>l,h:()=>t}),function(e){e.TODO="todo",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.CANCELLED="cancelled"}(t||(t={})),function(e){e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical"}(l||(l={}))}};