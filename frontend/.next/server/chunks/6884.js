"use strict";exports.id=6884,exports.ids=[6884],exports.modules={8399:(e,s,a)=>{a.d(s,{g:()=>f});var t=a(10326),r=a(17577),l=a(24118),n=a(91664),i=a(41190),d=a(44794),c=a(82015),o=a(29280),m=a(38443),x=a(71821),u=a(75290),h=a(94019),j=a(74723),p=a(1774),g=a(10123),v=a(41485);let N=g.Ry({name:g.Z_().required("Project name is required"),description:g.Z_().required("Description is required"),status:g.Z_().required("Status is required"),priority:g.Z_().required("Priority is required"),startDate:g.hT().required("Start date is required"),endDate:g.hT().required("End date is required").min(g.iH("startDate"),"End date must be after start date"),budget:g.Rx().positive("Budget must be positive").nullable(),projectManagerId:g.Z_().required("Project manager is required"),teamMemberIds:g.IX().of(g.Z_()).min(1,"At least one team member is required"),clientEmail:g.Z_().email("Invalid email format").nullable(),notes:g.Z_().nullable()});function f({open:e,onClose:s,onSave:a,project:g,mode:f}){let[b,y]=(0,r.useState)(!1),[w,D]=(0,r.useState)([]),[C,S]=(0,r.useState)([]),[I,Q]=(0,r.useState)([]),[_,P]=(0,r.useState)(!1),[q,E]=(0,r.useState)([]),{control:M,handleSubmit:Z,reset:k,watch:F,setValue:V,formState:{errors:T}}=(0,j.cI)({resolver:(0,p.X)(N),defaultValues:{name:"",description:"",status:"planning",priority:"medium",startDate:new Date,endDate:new Date,budget:null,projectManagerId:"",teamMemberIds:[],clientEmail:"",notes:""}}),B=F("teamMemberIds"),O=async e=>{try{let t;y(!0);let r={...e,startDate:e.startDate.toISOString().split("T")[0],endDate:e.endDate.toISOString().split("T")[0],budget:e.budget||void 0,clientEmail:e.clientEmail||void 0,notes:e.notes||void 0};t="create"===f?await v.Ew.createProject(r):await v.Ew.updateProject(g.id,r),a(t),s()}catch(e){console.error("Error saving project:",e)}finally{y(!1)}},R=e=>{let s=B||[];V("teamMemberIds",s.includes(e)?s.filter(s=>s!==e):[...s,e])},z=()=>{b||s()};return t.jsx(l.Vq,{open:e,onOpenChange:z,children:(0,t.jsxs)(l.cZ,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(l.fK,{children:[t.jsx(l.$N,{children:"create"===f?"Create New Project":"Edit Project"}),t.jsx(l.Be,{children:"create"===f?"Fill in the details to create a new project":"Update the project information"})]}),(0,t.jsxs)("form",{onSubmit:Z(O),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[t.jsx(d._,{htmlFor:"name",children:"Project Name *"}),t.jsx(j.Qr,{name:"name",control:M,render:({field:e})=>t.jsx(i.I,{...e,id:"name",placeholder:"Enter project name",className:T.name?"border-red-500":""})}),T.name&&t.jsx("p",{className:"text-sm text-red-600",children:T.name.message})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[t.jsx(d._,{htmlFor:"description",children:"Description *"}),t.jsx(j.Qr,{name:"description",control:M,render:({field:e})=>t.jsx(c.g,{...e,id:"description",placeholder:"Enter project description",rows:3,className:T.description?"border-red-500":""})}),T.description&&t.jsx("p",{className:"text-sm text-red-600",children:T.description.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(d._,{children:"Status *"}),t.jsx(j.Qr,{name:"status",control:M,render:({field:e})=>(0,t.jsxs)(o.Ph,{value:e.value,onValueChange:e.onChange,children:[t.jsx(o.i4,{children:t.jsx(o.ki,{placeholder:"Select status"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"planning",children:"Planning"}),t.jsx(o.Ql,{value:"in_progress",children:"In Progress"}),t.jsx(o.Ql,{value:"on_hold",children:"On Hold"}),t.jsx(o.Ql,{value:"completed",children:"Completed"}),t.jsx(o.Ql,{value:"cancelled",children:"Cancelled"})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(d._,{children:"Priority *"}),t.jsx(j.Qr,{name:"priority",control:M,render:({field:e})=>(0,t.jsxs)(o.Ph,{value:e.value,onValueChange:e.onChange,children:[t.jsx(o.i4,{children:t.jsx(o.ki,{placeholder:"Select priority"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"low",children:"Low"}),t.jsx(o.Ql,{value:"medium",children:"Medium"}),t.jsx(o.Ql,{value:"high",children:"High"}),t.jsx(o.Ql,{value:"critical",children:"Critical"})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(d._,{htmlFor:"startDate",children:"Start Date *"}),t.jsx(j.Qr,{name:"startDate",control:M,render:({field:e})=>t.jsx(i.I,{type:"date",value:e.value?e.value.toISOString().split("T")[0]:"",onChange:s=>e.onChange(new Date(s.target.value)),className:T.startDate?"border-red-500":""})}),T.startDate&&t.jsx("p",{className:"text-sm text-red-600",children:T.startDate.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(d._,{htmlFor:"endDate",children:"End Date *"}),t.jsx(j.Qr,{name:"endDate",control:M,render:({field:e})=>t.jsx(i.I,{type:"date",value:e.value?e.value.toISOString().split("T")[0]:"",onChange:s=>e.onChange(new Date(s.target.value)),className:T.endDate?"border-red-500":""})}),T.endDate&&t.jsx("p",{className:"text-sm text-red-600",children:T.endDate.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(d._,{htmlFor:"budget",children:"Budget"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t.jsx(j.Qr,{name:"budget",control:M,render:({field:e})=>t.jsx(i.I,{...e,type:"number",placeholder:"0.00",className:"pl-10",value:e.value||"",onChange:s=>e.onChange(s.target.value?parseFloat(s.target.value):null)})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(d._,{htmlFor:"clientEmail",children:"Client Email"}),t.jsx(j.Qr,{name:"clientEmail",control:M,render:({field:e})=>t.jsx(i.I,{...e,type:"email",placeholder:"client@example.com",value:e.value||""})})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[t.jsx(d._,{children:"Project Manager *"}),t.jsx(j.Qr,{name:"projectManagerId",control:M,render:({field:e})=>(0,t.jsxs)(o.Ph,{value:e.value,onValueChange:e.onChange,children:[t.jsx(o.i4,{children:t.jsx(o.ki,{placeholder:"Select project manager"})}),t.jsx(o.Bw,{children:C.map(e=>(0,t.jsxs)(o.Ql,{value:e.id,children:[e.firstName||e.userName," (",e.email,")"]},e.id))})]})}),T.projectManagerId&&t.jsx("p",{className:"text-sm text-red-600",children:T.projectManagerId.message})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[t.jsx(d._,{children:"Team Members *"}),t.jsx("div",{className:"border rounded-lg p-3 max-h-40 overflow-y-auto",children:_?(0,t.jsxs)("div",{className:"flex items-center justify-center py-4",children:[t.jsx(u.Z,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading users..."})]}):t.jsx("div",{className:"space-y-2",children:I.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded cursor-pointer",onClick:()=>R(e.id),children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:e.firstName||e.userName}),t.jsx("p",{className:"text-sm text-gray-500",children:e.email})]}),t.jsx("input",{type:"checkbox",checked:B?.includes(e.id)||!1,onChange:()=>R(e.id),className:"rounded"})]},e.id))})}),q.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:q.map(e=>(0,t.jsxs)(m.C,{variant:"secondary",className:"text-xs",children:[e.firstName||e.userName,t.jsx("button",{type:"button",onClick:()=>R(e.id),className:"ml-1 hover:text-red-600",children:t.jsx(h.Z,{className:"h-3 w-3"})})]},e.id))}),T.teamMemberIds&&t.jsx("p",{className:"text-sm text-red-600",children:T.teamMemberIds.message})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[t.jsx(d._,{htmlFor:"notes",children:"Notes"}),t.jsx(j.Qr,{name:"notes",control:M,render:({field:e})=>t.jsx(c.g,{...e,id:"notes",placeholder:"Additional project notes...",rows:3,value:e.value||""})})]})]}),(0,t.jsxs)(l.cN,{children:[t.jsx(n.z,{type:"button",variant:"outline",onClick:z,disabled:b,children:"Cancel"}),t.jsx(n.z,{type:"submit",disabled:b,className:"modern-button",children:b?(0,t.jsxs)(t.Fragment,{children:[t.jsx(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"create"===f?"Create Project":"Update Project"})]})]})]})})}},50384:(e,s,a)=>{a.d(s,{SP:()=>c,dr:()=>d,mQ:()=>i,nU:()=>o});var t=a(10326),r=a(17577),l=a(28407),n=a(51223);let i=l.fC,d=r.forwardRef(({className:e,...s},a)=>t.jsx(l.aV,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));d.displayName=l.aV.displayName;let c=r.forwardRef(({className:e,...s},a)=>t.jsx(l.xz,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));c.displayName=l.xz.displayName;let o=r.forwardRef(({className:e,...s},a)=>t.jsx(l.VY,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=l.VY.displayName}};