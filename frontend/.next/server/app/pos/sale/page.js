(()=>{var e={};e.id=9703,e.ids=[9703],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},36443:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>d}),t(63514),t(70733),t(35866);var a=t(23191),r=t(88716),l=t(37922),i=t.n(l),c=t(95231),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);t.d(s,n);let d=["",{children:["pos",{children:["sale",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,63514)),"D:\\TestApi\\frontend\\src\\app\\pos\\sale\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,70733)),"D:\\TestApi\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\TestApi\\frontend\\src\\app\\pos\\sale\\page.tsx"],u="/pos/sale/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/pos/sale/page",pathname:"/pos/sale",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},29074:(e,s,t)=>{Promise.resolve().then(t.bind(t,2473))},57671:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},2473:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(10326),r=t(17577),l=t(29752),i=t(91664),c=t(41190),n=t(44794),d=t(29280),o=t(38443),u=t(74131),p=t(41485),m=t(69343),x=t(83855),h=t(88307),f=t(57671);let j=(0,t(76557).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var g=t(95964),N=t(71821),y=t(48705),v=t(29272);let b=()=>{let{user:e}=(0,u.a)(),[s,t]=(0,r.useState)([]),[b,w]=(0,r.useState)([]),[C,q]=(0,r.useState)(""),[E,S]=(0,r.useState)(m.qq.CASH),[_,k]=(0,r.useState)(""),[P,A]=(0,r.useState)(""),[R,Z]=(0,r.useState)(!1),[O,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{z()},[]);let z=async()=>{try{let e=await p.Ew.get("/pos/products");t(e.products||[])}catch(e){console.error("Error fetching products:",e)}},D=async e=>{if(!(e.length<2))try{let s=await p.Ew.get(`/pos/products/search?q=${e}`);t(s.products||[])}catch(e){console.error("Error searching products:",e)}},H=e=>{b.find(s=>s.product.id===e.id)?w(b.map(s=>s.product.id===e.id?{...s,quantity:s.quantity+1,total:(s.quantity+1)*e.price}:s)):w([...b,{product:e,quantity:1,total:e.price}]),T(!1),q("")},M=(e,s)=>{if(s<=0){I(e);return}w(b.map(t=>t.product.id===e?{...t,quantity:s,total:s*t.product.price}:t))},I=e=>{w(b.filter(s=>s.product.id!==e))},G=()=>{w([]),k(""),A("")},B=()=>b.reduce((e,s)=>e+s.total,0),U=async()=>{if(0!==b.length){Z(!0);try{let e={customerName:_||void 0,items:b.map(e=>({productId:e.product.id,productName:e.product.name,quantity:e.quantity,unitPrice:e.product.price,discount:0,taxRate:0,taxAmount:0,total:e.total})),taxRate:0,discount:0,paymentMethod:E,notes:P||void 0};await p.Ew.post("/pos/transactions",e),G(),alert("Transaction completed successfully!")}catch(e){console.error("Error creating transaction:",e),alert("Error creating transaction. Please try again.")}finally{Z(!1)}}},F=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return a.jsx(v.cl,{children:(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"New Sale"}),a.jsx("p",{className:"text-muted-foreground",children:"Create a new point of sale transaction"})]}),(0,a.jsxs)(i.z,{onClick:()=>T(!0),className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"Add Product"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"h-5 w-5"}),"Search Products"]}),a.jsx(l.SZ,{children:"Search by product name, SKU, or barcode"})]}),a.jsx(l.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(h.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(c.I,{placeholder:"Search products...",value:C,onChange:e=>{q(e.target.value),D(e.target.value)},className:"pl-10"})]}),C&&a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>H(e),children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["SKU: ",e.sku," | Stock:"," ",e.stockQuantity]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"font-semibold",children:F(e.price)}),a.jsx(o.C,{variant:"outline",className:"text-xs",children:e.category})]})]},e.id))})]})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[a.jsx(f.Z,{className:"h-5 w-5"}),"Cart (",b.length," items)"]}),a.jsx(l.SZ,{children:"Review items before checkout"})]}),a.jsx(l.aY,{children:0===b.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(f.Z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),a.jsx("p",{className:"mt-2 text-muted-foreground",children:"No items in cart"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Search and add products to get started"})]}):a.jsx("div",{className:"space-y-3",children:b.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:e.product.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[F(e.product.price)," each"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>M(e.product.id,e.quantity-1),children:a.jsx(j,{className:"h-4 w-4"})}),a.jsx("span",{className:"w-12 text-center font-medium",children:e.quantity}),a.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>M(e.product.id,e.quantity+1),children:a.jsx(x.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"text-right ml-4",children:[a.jsx("p",{className:"font-semibold",children:F(e.total)}),a.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>I(e.product.id),className:"text-red-600 hover:text-red-700",children:"Remove"})]})]})]},e.product.id))})})]})]}),a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[a.jsx(g.Z,{className:"h-5 w-5"}),"Checkout"]})}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(n._,{htmlFor:"customerName",children:"Customer Name (Optional)"}),a.jsx(c.I,{id:"customerName",placeholder:"Walk-in customer",value:_,onChange:e=>k(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(n._,{htmlFor:"paymentMethod",children:"Payment Method"}),(0,a.jsxs)(d.Ph,{value:E,onValueChange:e=>S(e),children:[a.jsx(d.i4,{children:a.jsx(d.ki,{})}),a.jsx(d.Bw,{children:Object.values(m.qq).map(e=>a.jsx(d.Ql,{value:e,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e===m.qq.CASH?a.jsx(N.Z,{className:"h-4 w-4"}):a.jsx(y.Z,{className:"h-4 w-4"}),a.jsx("span",{children:e.replace("_"," ")})]})},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(n._,{htmlFor:"notes",children:"Notes (Optional)"}),a.jsx(c.I,{id:"notes",placeholder:"Transaction notes...",value:P,onChange:e=>A(e.target.value)})]}),(0,a.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsx("span",{children:F(B())})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{children:F(B())})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i.z,{onClick:U,disabled:0===b.length||R,className:"w-full bg-green-600 hover:bg-green-700",children:R?"Processing...":"Complete Sale"}),a.jsx(i.z,{variant:"outline",onClick:G,disabled:0===b.length,className:"w-full",children:"Clear Cart"})]})]})]})})]})]})})}},29272:(e,s,t)=>{"use strict";t.d(s,{cl:()=>a.default});var a=t(62760);t(63102),t(17676)},29280:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>h,Ph:()=>o,Ql:()=>f,i4:()=>p,ki:()=>u});var a=t(10326),r=t(17577),l=t(38785),i=t(941),c=t(96633),n=t(32933),d=t(51223);let o=l.fC;l.ZA;let u=l.B4,p=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,a.jsx(l.JO,{asChild:!0,children:a.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=l.xz.displayName;let m=r.forwardRef(({className:e,...s},t)=>a.jsx(l.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(c.Z,{className:"h-4 w-4"})}));m.displayName=l.u_.displayName;let x=r.forwardRef(({className:e,...s},t)=>a.jsx(l.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(i.Z,{className:"h-4 w-4"})}));x.displayName=l.$G.displayName;let h=r.forwardRef(({className:e,children:s,position:t="popper",...r},i)=>a.jsx(l.h_,{children:(0,a.jsxs)(l.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(m,{}),a.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(x,{})]})}));h.displayName=l.VY.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=l.__.displayName;let f=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(l.wU,{children:a.jsx(n.Z,{className:"h-4 w-4"})})}),a.jsx(l.eT,{children:s})]}));f.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},69343:(e,s,t)=>{"use strict";var a,r,l,i;t.d(s,{Pp:()=>i,XH:()=>r,hA:()=>l,qq:()=>a}),function(e){e.CASH="cash",e.CREDIT_CARD="credit_card",e.DEBIT_CARD="debit_card",e.BANK_TRANSFER="bank_transfer",e.CHECK="check",e.OTHER="other"}(a||(a={})),function(e){e.PENDING="pending",e.COMPLETED="completed",e.CANCELLED="cancelled",e.REFUNDED="refunded"}(r||(r={})),function(e){e.OPEN="open",e.CLOSED="closed"}(l||(l={})),function(e){e.ELECTRONICS="electronics",e.CLOTHING="clothing",e.FOOD="food",e.BEVERAGES="beverages",e.HEALTHCARE="healthcare",e.BEAUTY="beauty",e.HOME="home",e.AUTOMOTIVE="automotive",e.SPORTS="sports",e.BOOKS="books",e.OTHER="other"}(i||(i={}))},63514:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`D:\TestApi\frontend\src\app\pos\sale\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[690,434,1571,649,39,692,9314,2760],()=>t(36443));module.exports=a})();